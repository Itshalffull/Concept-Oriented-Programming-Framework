<!-- Auto-generated by COPF Interface Kit — claude-skills target -->
<!-- Concept: CacheCompiler -->
<!-- Do not edit manually; regenerate with: copf interface generate -->
# Cache Compilation and Invalidation

The cache compiler pre-compiles all concept specs and sync rules
into artifacts for faster startup and deployment.

## What Gets Cached

| Artifact | Source | Format |
|----------|--------|--------|
| Parsed ASTs | `.concept` files | JSON |
| Concept manifests | Parsed ASTs | JSON |
| Compiled syncs | `.sync` files | JavaScript |
| Type definitions | Manifests | TypeScript `.d.ts` |

## Cache Directory

```
.copf-cache/
├── manifests/
│   ├── user.manifest.json
│   └── article.manifest.json
├── syncs/
│   ├── create-profile.compiled.js
│   └── welcome-email.compiled.js
├── types/
│   ├── user.d.ts
│   └── article.d.ts
└── cache.lock.json       # Content hashes for invalidation
```

## Content-Addressed Invalidation

Each cached artifact is keyed by the content hash of its source
file. When you run `copf compile --cache`:

1. Hash each source file.
2. Compare against `cache.lock.json`.
3. Only recompile files whose hash changed.
4. Update `cache.lock.json` with new hashes.

## Commands

| Command | Purpose |
|---------|---------|
| `copf compile --cache` | Build/rebuild the cache |
| `copf compile --cache --clean` | Wipe and rebuild from scratch |
| `copf compile --cache --verbose` | Show per-file cache hits/misses |

## Deployment Use

In production, deploy the `.copf-cache/` directory alongside
your application. The runtime loads pre-compiled artifacts
instead of parsing specs at startup.
