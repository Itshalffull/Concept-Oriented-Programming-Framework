<!-- Auto-generated by COPF Interface Kit — claude-skills target -->
<!-- Concept: SchemaGen -->
<!-- Do not edit manually; regenerate with: copf interface generate -->
# Walkthrough: Implementing a Concept Handler

This walkthrough shows how to implement a handler for the
`User` concept from spec to working code.

## Step 1: Generate the Manifest

```bash
copf generate specs/user.concept
```

This produces `generated/manifests/user.manifest.json` with typed
action signatures.

## Step 2: Create the Handler File

```typescript
// implementations/user.handler.ts
import type { ConceptHandler, ConceptStorage } from '@copf/kernel';

interface UserState {
  name: string;
  email: string;
}

export const userHandler: ConceptHandler<UserState> = {
  async create(input, storage) {
    // Check for duplicate
    for (const [id, user] of await storage.entries()) {
      if (user.name === input.name) {
        return { variant: 'duplicate', name: input.name };
      }
    }
    // Create
    const id = crypto.randomUUID();
    await storage.set(id, { name: input.name, email: input.email });
    return { variant: 'ok', user: id };
  },

  async delete(input, storage) {
    if (!await storage.has(input.user)) {
      return { variant: 'notFound', user: input.user };
    }
    await storage.delete(input.user);
    return { variant: 'ok' };
  },
};
```

## Step 3: Verify Against Manifest

Every variant declared in the spec must have a code path:
- `create → ok` ✓
- `create → duplicate` ✓
- `delete → ok` ✓
- `delete → notFound` ✓

## Step 4: Run Tests

```bash
npx vitest run tests/user.test.ts
```
