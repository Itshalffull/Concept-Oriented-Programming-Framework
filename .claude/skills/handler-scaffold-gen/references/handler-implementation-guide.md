<!-- Auto-generated by COPF Interface Kit â€” claude-skills target -->
<!-- Concept: HandlerScaffoldGen -->
<!-- Do not edit manually; regenerate with: copf interface generate -->
# Handler Implementation Guide

How to implement COPF concept handlers in TypeScript.

## ConceptHandler Interface

```typescript
interface ConceptHandler {
  [actionName: string]: (
    input: Record<string, unknown>,
    storage: ConceptStorage,
  ) => Promise<{ variant: string; [key: string]: unknown }>;
}
```

## Standard Pattern

```typescript
export const myConceptHandler: ConceptHandler = {
  async register() {
    return {
      variant: 'ok',
      name: 'MyConcept',
      inputKind: 'MyInput',
      outputKind: 'MyOutput',
      capabilities: JSON.stringify(['cap1', 'cap2']),
    };
  },

  async create(input, storage) {
    const name = input.name as string;
    if (!name) return { variant: 'error', message: 'name required' };

    try {
      const id = crypto.randomUUID();
      await storage.put('items', id, { id, name });
      return { variant: 'ok', item: id };
    } catch (err) {
      const msg = err instanceof Error ? err.message : String(err);
      return { variant: 'error', message: msg };
    }
  },
};
```

## Storage Patterns

| Operation | Method | Example |
|-----------|--------|---------|
| Create/Update | `storage.put(rel, key, value)` | `put('items', id, data)` |
| Read | `storage.get(rel, key)` | `get('items', id)` |
| Query | `storage.find(rel, criteria)` | `find('items', { status: 'active' })` |
| Delete | `storage.del(rel, key)` | `del('items', id)` |
| Bulk delete | `storage.delMany(rel, criteria)` | `delMany('items', { expired: true })` |

## Type Mapping

| Concept Type | TypeScript Type |
|-------------|----------------|
| String | string |
| Int | number |
| Bool | boolean |
| list T | T[] |
| set T | Map<string, T> |
| option T | T \| undefined |
