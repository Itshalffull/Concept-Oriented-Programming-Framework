<!-- Auto-generated by COPF Interface Kit — claude-skills target -->
<!-- Concept: SyncScaffoldGen -->
<!-- Do not edit manually; regenerate with: copf interface generate -->
# Sync Rule Guide

How to write well-formed `.sync` files.

## Structure

```
sync SyncName [eager]
  purpose: "Why this sync exists — explain the causal chain."
when {
  SourceConcept/action: [
    field: ?var
  ] => ok(result: ?value)
}
where {
  bind(?var.property as ?local)
  query(OtherConcept/find: [criteria: ?local] as ?results)
  any(?local = "value1"; ?local = "value2")
  not(?local = "forbidden")
}
then {
  TargetConcept/action: [
    field: ?var;
    other: ?local
  ]
}
```

## When Clause

Matches completions of concept actions:
- `Concept/action: [params] => variant(results)`
- Variables use `?` prefix: `?user`, `?name`
- Can destructure: `metadata: ?meta`

## Where Clause (optional)

Guard conditions:
- `bind(?expr as ?local)` — Extract nested values
- `query(Concept/action: [...] as ?result)` — Query state
- `any(cond1; cond2)` — OR conditions
- `not(cond)` — Negation
- `?a = ?b` — Equality check

## Then Clause

Actions to invoke:
- `Concept/action: [field: ?var]`
- Multiple actions allowed
- Variables from when/where are available

## Tier Annotations

| Annotation | Meaning |
|-----------|---------|
| `[eager]` | Fires immediately (same as required) |
| `[required]` | Cannot be disabled or overridden |
| `[recommended]` | Can be overridden by application |
