---
name: toolchain
description: Coordinate tool resolution across languages and platforms 
 Owns the resolved tool registry : what tools are available , 
 their versions , paths , and capabilities Provider agnostic 
 Builder invokes Toolchain actions , and integration syncs 
 route to the active language provider concept
argument-hint: $ARGUMENTS
allowed-tools: Read, Grep, Glob, Bash
---

<!-- Auto-generated by Clef Clef Bind — claude-skills target -->
<!-- Concept: Toolchain -->
<!-- Do not edit manually; regenerate with: clef interface generate -->

# Toolchain

Resolve toolchain for **$ARGUMENTS**, validating compiler availability, version constraints, and platform capabilities.


> **When to use:** Use when resolving, validating, or listing compiler toolchains for the build layer. Routes resolution to language-specific providers (SwiftToolchain, TypeScriptToolchain, RustToolchain, SolidityToolchain).


## Design Principles

- **Resolution Caching:** Resolve once per language+platform, reuse across all concept builds. Toolchain resolution is shared.
- **Drift Detection:** Validate before build to catch environment drift — tools may be uninstalled, upgraded, or moved between resolves.
- **Provider Routing:** Toolchain never knows about swiftc, tsc, or rustc — it routes to SwiftToolchain, TypeScriptToolchain, etc.

## Step-by-Step Process

### Step 1: Resolve Toolchain

Find and validate a compiler toolchain for a language and platform. Routes to language-specific providers.

**Arguments:** `$0` **language** (string), `$1` **platform** (string), `$2` **versionConstraint** (string?), `$3` **category** (string?), `$4` **toolName** (string?)

**Checklist:**
- [ ] Language is supported (swift/typescript/rust/solidity)?
- [ ] Platform identifier is valid?
- [ ] Version constraint parseable?
- [ ] Provider registered for this language?

**Examples:**
*Resolve Swift toolchain*
```bash
clef toolchain resolve swift --platform linux-arm64 --version '>=5.10'
```
*Resolve programmatically*
```typescript
import { toolchainHandler } from './toolchain.impl';
const result = await toolchainHandler.resolve(
  { language: 'swift', platform: 'linux-arm64', versionConstraint: '>=5.10' },
  storage,
);
```

### Step 2: Validate Toolchain

Verify a previously resolved toolchain is still valid — tool exists at path, version matches.

**Arguments:** `$0` **tool** (T)

**Checklist:**
- [ ] Tool reference is valid?
- [ ] Tool still exists at recorded path?
- [ ] Version hasn't changed since resolution?

**Examples:**
*Validate all toolchains*
```bash
clef toolchain validate
```

### Step 3: List Toolchains

List all resolved toolchains, optionally filtered by language.

**Arguments:** `$0` **language** (string?), `$1` **category** (string?)

**Checklist:**
- [ ] Language filter is valid (if provided)?

**Examples:**
*List all resolved toolchains*
```bash
clef toolchain list
```
*List by language*
```bash
clef toolchain list --language swift
```

### Step 4: Show Capabilities

Return detailed capabilities for a resolved tool.

**Arguments:** `$0` **tool** (T)

**Checklist:**
- [ ] Tool reference is valid?

## References

- [Toolchain resolution and validation](references/toolchain-resolution.md)
## Supporting Materials

- [Toolchain resolution walkthrough](examples/resolve-toolchains.md)
## Quick Reference

| Action | Command | Purpose |
|--------|---------|---------|
| resolve | `clef toolchain resolve <lang>` | Find compiler for language |
| validate | `clef toolchain validate` | Re-check resolved tools |
| list | `clef toolchain list` | Show all toolchains |
| capabilities | `clef toolchain capabilities` | Show tool capabilities |


## Anti-Patterns

### Hardcoded tool paths
Builder uses hardcoded paths to compilers instead of resolving through Toolchain.

**Bad:**
```
SwiftBuilder/build(toolchainPath: "/usr/bin/swiftc", ...)

```

**Good:**
```
Toolchain/resolve(language: "swift", platform: "linux-arm64")
# -> ok(tool, version, path: "/usr/bin/swiftc", capabilities)
SwiftBuilder/build(toolchainPath: ?path, ...)

```
## Validation

*List resolved toolchains:*
```bash
clef toolchain list
```
*Resolve a specific toolchain:*
```bash
clef toolchain resolve swift --platform linux-arm64 --version '>=5.10'
```
*Validate all toolchains:*
```bash
clef toolchain validate
```
## Related Skills

| Skill | When to Use |
| --- | --- |
| `/build-orchestration` | Builder uses resolved toolchains |
| `/deployment-config` | Deploy manifest configures build targets |
