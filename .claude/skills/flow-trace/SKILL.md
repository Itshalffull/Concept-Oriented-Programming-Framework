---
name: flow-trace
description: Build and render interactive debug traces from action log records 
 Each flow becomes a navigable tree showing the causal chain of 
 actions , syncs , and completions with timing and failure status
argument-hint: <flow-id>
allowed-tools: Read, Bash
---

<!-- Auto-generated by COPF Interface Kit — claude-skills target -->
<!-- Concept: FlowTrace -->
<!-- Do not edit manually; regenerate with: copf interface generate -->

# FlowTrace

Build a debug trace for flow **$ARGUMENTS** showing the causal chain of concept actions, sync firings, and data propagation.


> **When to use:** Use when debugging action flows, tracing causal chains through concept actions and sync firings, or diagnosing why an expected sync did not trigger.


## Design Principles

- **Causal Completeness:** The trace shows the complete causal chain — every action that fired because of the initial trigger, not just the immediate effects.
- **Non-Intrusive:** Tracing reads the action log — it never modifies runtime behavior or adds overhead to normal execution.

## Step-by-Step Process

### Step 1: Build Execution Trace

Build a trace from a flow ID showing which concepts were invoked, what syncs fired, and data flow between them.

**Arguments:** `$0` **flowId** (string)

**Checklist:**
- [ ] Flow ID exists in action log?
- [ ] All causal links followed (action → sync → action)?
- [ ] Timing data captured for each node?

**Examples:**
*Build trace from flow ID*
```bash
copf trace <flow-id>
```
*Build trace programmatically*
```typescript
import { flowTraceHandler } from './flow-trace.impl';
const result = await flowTraceHandler.build(
  { flowId: 'abc-123' }, storage
);
```

### Step 2: Render Trace Output

Render the trace tree as a human-readable output with timing, success/failure status, and data flow arrows.

**Arguments:** `$0` **trace** (F), `$1` **options** (renderoptions)

**Checklist:**
- [ ] Tree indentation correct?
- [ ] Failed nodes highlighted?
- [ ] Data flow arrows show variable propagation?

## References

- [Debugging with FlowTrace](references/debugging.md)
## Supporting Materials

- [Flow debugging walkthrough](examples/debug-a-flow.md)
## Quick Reference

| Action | Command | Purpose |
|--------|---------|---------|
| build | `copf trace <flow-id>` | Build trace from a flow ID |
| render | (automatic) | Render trace as tree output |


## Validation

*Build a trace:*
```bash
npx tsx cli/src/index.ts trace <flow-id>
```
## Related Skills

| Skill | When to Use |
| --- | --- |
| `/sync-designer` | Design the syncs whose execution traces debug |
| `/concept-validator` | Validate specs before debugging runtime issues |
| `/dev-workflow` | Run the dev server to generate flow IDs for tracing |
