# HostUnmountCleansUp â€” coif-app required sync
# Destroy all machines and unbind when Host unmounts

sync HostUnmountCleansUp [eager]
  purpose: "Destroy all machines and unbind when Host unmounts"
when {
  Host/unmount: [ host: ?host ]
    => [ host: ?host ]
}
where {
  Host: { ?host machines: ?machines; binding: ?binding }
}
then {
  Machine/destroy: [ machine: ?machines ]
  Binding/unbind: [ binding: ?binding ]
}
