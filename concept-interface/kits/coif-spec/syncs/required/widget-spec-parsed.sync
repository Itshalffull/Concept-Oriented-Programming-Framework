# ============================================================
# WidgetSpecParsed â€” coif-spec required sync
#
# When a .widget file is loaded as a Resource, parse it into
# a typed WidgetAST via WidgetParser.
# ============================================================

sync WidgetSpecParsed [eager]
when {
  Resource/track: [ resource: ?res; kind: "widget" ]
    => ok(resource: ?res; content: ?source)
}
then {
  WidgetParser/parse: [ widget: ?res; source: ?source ]
}
