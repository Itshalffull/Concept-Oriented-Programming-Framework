// Auto-generated by COPF Interface Kit â€” cli target
// Concept: KindSystem
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const kindSystemCommand = new Command('kind-system')
  .description('Inspect the IR kind taxonomy and pipeline topology.');

kindSystemCommand
  .command('define')
  .description('Register a new IR kind')
  .argument('<name>', 'Name')
  .option('-c, --category <value>', 'Kind category (source, model, artifact) (source|model|artifact)')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'define', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('connect')
  .description('Declare a transform edge between two kinds')
  .requiredOption('--from <from>', 'Source kind')
  .requiredOption('--to <to>', 'Target kind')
  .requiredOption('--relation <relation>', 'Transform relation (normalizes_to, compiles_to, etc.)')
  .option('-t, --transform-name <transformName>', 'Name of the transform/generator')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'connect', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('route')
  .description('Find shortest transform path between two kinds')
  .requiredOption('--from <from>', 'Source kind')
  .requiredOption('--to <to>', 'Target kind')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf kind-system route --from ConceptDSL --to TypeScriptFiles  # Route from source to TypeScript')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'route', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('validate')
  .description('Validate a transform edge')
  .requiredOption('--from <from>', 'From')
  .requiredOption('--to <to>', 'To')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'validate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('dependents')
  .description('List all downstream kinds from a given kind')
  .argument('<kind>', 'Kind')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf kind-system dependents ConceptManifest  # What depends on ConceptManifest?')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'dependents', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('producers')
  .description('Show what transforms produce a given kind')
  .argument('<kind>', 'Kind')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf kind-system producers TypeScriptFiles  # What produces TypeScriptFiles?')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'producers', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('consumers')
  .description('Show what transforms consume a given kind')
  .argument('<kind>', 'Kind')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf kind-system consumers ConceptManifest  # What consumes ConceptManifest?')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'consumers', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kindSystemCommand
  .command('graph')
  .description('Show the full kind taxonomy graph')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf kind-system graph  # Display kind graph')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'graph', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const kindSystemCommandTree = {
  group: 'kind-system',
  description: 'Inspect the IR kind taxonomy and pipeline topology.',
  commands: [{ action: 'define', command: 'define' }, { action: 'connect', command: 'connect' }, { action: 'route', command: 'route' }, { action: 'validate', command: 'validate' }, { action: 'dependents', command: 'dependents' }, { action: 'producers', command: 'producers' }, { action: 'consumers', command: 'consumers' }, { action: 'graph', command: 'graph' }],
};
