<!-- Auto-generated by Clef Clef Bind — cli target -->
<!-- Concept: ConceptScaffoldGen -->
<!-- Do not edit manually; regenerate with: clef interface generate -->

# clef concept-scaffold-gen — Help

Scaffold a concept spec for **<source>** with state declarations, typed action signatures, and a register() action.


> **When to use:** Use when creating a new concept specification from scratch. Generates a .concept file with purpose, state, actions, variants, invariants, and a register() action following Jackson's methodology.


## Design Principles

- **Singularity:** Each concept serves exactly one purpose — if the purpose has 'and', it's two concepts.
- **Independence:** A concept never references another concept's types or calls another concept's actions. Use type parameters and syncs.
- **Sufficiency & Necessity:** Every state field is needed by at least one action. Every action serves the concept's purpose. No dead state.
- **Invariant Completeness:** Key properties are captured as formal invariants documenting what must be true after each action.
- **Description Quality:** Every variant description must explain the outcome in domain terms — never echo the variant name ('Created.') or use vague text ('Failed.'). Error variants explain what went wrong; ok variants explain what is now true.
**generate:**
- [ ] Concept name is PascalCase?
- [ ] Type parameter is a single capital letter?
- [ ] Purpose block describes why, not what?
- [ ] State fields use correct relation types (set, ->, option, list)?
- [ ] Every action has at least one variant?
- [ ] register() action is included for PluginRegistry?
- [ ] Annotations (@category, @visibility) are present?
- [ ] Variant descriptions explain outcomes, not just echo variant names?
- [ ] All files written through Emitter (not directly to disk)?
- [ ] Source provenance attached to each file?
- [ ] Generation step recorded in GenerationPlan?
## References

- [Concept specification writing guide](references/concept-spec-guide.md)
## Supporting Materials

- [Concept spec scaffolding walkthrough](examples/scaffold-concept.md)
## Quick Reference

| Input | Type | Purpose |
|-------|------|---------|
| name | String | PascalCase concept name |
| typeParam | String | Type parameter letter (default: T) |
| purpose | String | Purpose description |
| category | String | Annotation category (domain, devtools, etc.) |
| stateFields | list StateField | State declarations |
| actions | list ActionDef | Action signatures with variants |


## Anti-Patterns

### Purpose describes implementation
Purpose block says how the concept works instead of why it exists.

**Bad:**
```
purpose {
  Store users in a Map<string, User> and provide CRUD operations
  via async handler methods.
}

```

**Good:**
```
purpose {
  Manage user identity and profile information.
}

```

### Missing variants
Action only has ok variant — no error handling path.

**Bad:**
```
action create(name: String) {
  -> ok(user: U) { Created. }
}

```

**Good:**
```
action create(name: String) {
  -> ok(user: U) { New user registered and ready for profile setup. }
  -> duplicate(name: String) { A user with this name already exists. }
  -> error(message: String) { Creation failed due to a storage or validation error. }
}

```

### Terse or echo descriptions
Variant descriptions that echo the variant name or use a single generic word — they tell the reader nothing about the actual outcome.

**Bad:**
```
action create(name: String) {
  -> ok(user: U) { Created. }
  -> error(message: String) { Failed. }
}

```

**Good:**
```
action create(name: String) {
  -> ok(user: U) { New user registered and ready for authentication setup. }
  -> error(message: String) { Creation failed due to a storage or validation error. }
}

```
## Validation

*Generate a concept scaffold:*
```bash
npx tsx cli/src/index.ts scaffold concept --name User --actions create,update,delete
```
*Validate generated concept:*
```bash
npx tsx cli/src/index.ts check concepts/user.concept
```
*Run scaffold generator tests:*
```bash
npx vitest run tests/scaffold-generators.test.ts
```
## Related Skills

- /concept-designer — Design concepts using Jackson's methodology before generating
- /handler-scaffold — Generate handler implementations for the concept
- /sync-scaffold — Generate sync rules connecting the concept
