// Auto-generated by Clef Clef Bind â€” cli target
// Concept: Conformance
// Do not edit manually; regenerate with: clef interface generate

import { Command } from 'commander';

export const conformanceCommand = new Command('conformance')
  .description('Verify that generated code faithfully implements concept 
 specifications Maintain spec to test traceability Track 
 per target conformance status Document and manage acceptable 
 deviations where a target language can t fully express a 
 spec requirement');

conformanceCommand
  .command('generate')
  .description('Parse concept spec and generate language independent 
 test vectors Each vector specifies an action invocation 
 and expected outcome based on the spec s operational 
 principle and invariants 
 Test vectors are language independent the same vector 
 is executed against the TypeScript , Rust , Swift , and 
 Solidity implementations')
  .requiredOption('--concept <concept>', 'Concept')
  .requiredOption('--spec-path <specPath>', 'Spec Path')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

conformanceCommand
  .command('verify')
  .description('Run conformance test vectors against a built artifact 
 for a specific language Returns which spec requirements 
 are covered by passing tests')
  .requiredOption('--suite <suite>', 'Suite')
  .requiredOption('--language <language>', 'Language')
  .requiredOption('--artifact-location <artifactLocation>', 'Artifact Location')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'verify', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

conformanceCommand
  .command('register-deviation')
  .description('Record an acceptable deviation Example : Solidity 
 can t express Option types the same way as Rust , 
 so the conformance test for optional return values 
 uses a different assertion shape')
  .requiredOption('--concept <concept>', 'Concept')
  .requiredOption('--language <language>', 'Language')
  .requiredOption('--requirement <requirement>', 'Requirement')
  .requiredOption('--reason <reason>', 'Reason')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'registerDeviation', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

conformanceCommand
  .command('matrix')
  .description('Return cross target conformance matrix 
 Shows which concepts pass conformance for which 
 languages conformance values : full , partial , 
 failing , untested')
  .requiredOption('--concepts <concepts>', 'Concepts')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'matrix', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

conformanceCommand
  .command('traceability')
  .description('Return full traceability : which spec requirements 
 are tested by which test vectors in which languages')
  .requiredOption('--concept <concept>', 'Concept')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'traceability', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const conformanceCommandTree = {
  group: 'conformance',
  description: 'Verify that generated code faithfully implements concept 
 specifications Maintain spec to test traceability Track 
 per target conformance status Document and manage acceptable 
 deviations where a target language can t fully express a 
 spec requirement',
  commands: [{ action: 'generate', command: 'generate' }, { action: 'verify', command: 'verify' }, { action: 'registerDeviation', command: 'register-deviation' }, { action: 'matrix', command: 'matrix' }, { action: 'traceability', command: 'traceability' }],
};
