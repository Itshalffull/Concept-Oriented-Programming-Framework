// Auto-generated by COPF Interface Kit â€” cli target
// Concept: DeploymentValidator
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const deploymentValidatorCommand = new Command('deployment-validator')
  .description('Parse and validate deployment manifests against compiled concepts 
 and syncs Produce deployment plans with transport assignments , 
 runtime mappings , and sync to engine bindings');

deploymentValidatorCommand
  .command('parse')
  .description('Parse YAML deployment manifest into structured form 
 Validate basic structure ( required fields , known runtime types )')
  .requiredOption('--raw <raw>', 'Raw')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'parse', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

deploymentValidatorCommand
  .command('validate')
  .description('Cross reference manifest against compiled concepts and syncs 
 Check : all referenced concepts have specs , all syncs reference 
 valid concepts , capability requirements met by runtimes , 
 transport configs are valid , engine hierarchy is acyclic 
 Produce a DeploymentPlan with concrete transport assignments')
  .requiredOption('--manifest <manifest>', 'Manifest')
  .requiredOption('--concepts <concepts>', 'Concepts')
  .requiredOption('--syncs <syncs>', 'Syncs')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'validate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const deploymentValidatorCommandTree = {
  group: 'deployment-validator',
  description: 'Parse and validate deployment manifests against compiled concepts 
 and syncs Produce deployment plans with transport assignments , 
 runtime mappings , and sync to engine bindings',
  commands: [{ action: 'parse', command: 'parse' }, { action: 'validate', command: 'validate' }],
};
