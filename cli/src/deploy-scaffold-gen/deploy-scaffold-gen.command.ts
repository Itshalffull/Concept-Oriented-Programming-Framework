// Auto-generated by Clef Clef Bind â€” cli target
// Concept: DeployScaffoldGen
// Do not edit manually; regenerate with: clef interface generate

import { Command } from 'commander';

export const deployScaffoldGenCommand = new Command('scaffold')
  .description('Generate deployment manifest (deploy.yaml).');

deployScaffoldGenCommand
  .command('deploy')
  .description('Scaffold a deploy.yaml with runtimes, infrastructure, and concept assignments.')
  .requiredOption('--app-name <appName>', 'App Name')
  .option('-r, --runtimes <runtimes>', 'Runtime declarations (name:type:transport:storage, comma-separated)')
  .option('-c, --concepts <concepts>', 'Concept assignments (Name:runtime, comma-separated)')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  clef scaffold deploy --app my-app  # Scaffold a basic deploy manifest')
  .addHelpText('after', '  clef scaffold deploy --app conduit --runtimes api:node:http:postgresql,worker:node:sqs:redis --iac terraform  # Scaffold with custom runtimes')
  .addHelpText('after', '  clef scaffold deploy --app conduit --concepts User:api,Article:api,Email:worker  # Scaffold with concept assignments')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

deployScaffoldGenCommand
  .command('preview')
  .description('Dry-run: compute output files without writing. Uses Emitter content-addressing to show what would change.')
  .requiredOption('--app-name <appName>', 'App Name')
  .requiredOption('--runtimes <runtimes>', 'Runtimes')
  .requiredOption('--concepts <concepts>', 'Concepts')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'preview', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

deployScaffoldGenCommand
  .command('register')
  .description('Return static metadata for PluginRegistry 
 name : DeployScaffoldGen 
 inputKind : DeployConfig 
 outputKind : DeployManifest 
 capabilities : [ deploy-yaml , runtime-config , infrastructure ]')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const deployScaffoldGenCommandTree = {
  group: 'scaffold',
  description: 'Generate deployment manifest (deploy.yaml).',
  commands: [{ action: 'generate', command: 'deploy' }, { action: 'preview', command: 'preview' }, { action: 'register', command: 'register' }],
};
