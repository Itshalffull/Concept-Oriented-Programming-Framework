// Resource â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for Resource
export interface ResourceStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface ResourceUpsertInput {
  readonly locator: string;
  readonly kind: string;
  readonly digest: string;
  readonly lastModified: O.Option<Date>;
  readonly size: O.Option<number>;
}

export interface ResourceUpsertOutputCreated {
  readonly variant: 'created';
  readonly resource: string;
}

export interface ResourceUpsertOutputChanged {
  readonly variant: 'changed';
  readonly resource: string;
  readonly previousDigest: string;
}

export interface ResourceUpsertOutputUnchanged {
  readonly variant: 'unchanged';
  readonly resource: string;
}

export type ResourceUpsertOutput = ResourceUpsertOutputCreated | ResourceUpsertOutputChanged | ResourceUpsertOutputUnchanged;

export interface ResourceGetInput {
  readonly locator: string;
}

export interface ResourceGetOutputOk {
  readonly variant: 'ok';
  readonly resource: string;
  readonly kind: string;
  readonly digest: string;
}

export interface ResourceGetOutputNotFound {
  readonly variant: 'notFound';
  readonly locator: string;
}

export type ResourceGetOutput = ResourceGetOutputOk | ResourceGetOutputNotFound;

export interface ResourceListInput {
  readonly kind: O.Option<string>;
}

export interface ResourceListOutput {
  readonly variant: 'ok';
  readonly resources: readonly { readonly locator: string; readonly kind: string; readonly digest: string }[];
}

export interface ResourceRemoveInput {
  readonly locator: string;
}

export interface ResourceRemoveOutputOk {
  readonly variant: 'ok';
  readonly resource: string;
}

export interface ResourceRemoveOutputNotFound {
  readonly variant: 'notFound';
  readonly locator: string;
}

export type ResourceRemoveOutput = ResourceRemoveOutputOk | ResourceRemoveOutputNotFound;

export interface ResourceDiffInput {
  readonly locator: string;
  readonly oldDigest: string;
  readonly newDigest: string;
}

export interface ResourceDiffOutputOk {
  readonly variant: 'ok';
  readonly changeType: string;
}

export interface ResourceDiffOutputUnknown {
  readonly variant: 'unknown';
  readonly message: string;
}

export type ResourceDiffOutput = ResourceDiffOutputOk | ResourceDiffOutputUnknown;

// --- Variant constructors ---

export const upsertCreated = (resource: string): ResourceUpsertOutput => ({ variant: 'created', resource } as ResourceUpsertOutput);
export const upsertChanged = (resource: string, previousDigest: string): ResourceUpsertOutput => ({ variant: 'changed', resource, previousDigest } as ResourceUpsertOutput);
export const upsertUnchanged = (resource: string): ResourceUpsertOutput => ({ variant: 'unchanged', resource } as ResourceUpsertOutput);

export const getOk = (resource: string, kind: string, digest: string): ResourceGetOutput => ({ variant: 'ok', resource, kind, digest } as ResourceGetOutput);
export const getNotFound = (locator: string): ResourceGetOutput => ({ variant: 'notFound', locator } as ResourceGetOutput);

export const listOk = (resources: readonly { readonly locator: string; readonly kind: string; readonly digest: string }[]): ResourceListOutput => ({ variant: 'ok', resources } as ResourceListOutput);

export const removeOk = (resource: string): ResourceRemoveOutput => ({ variant: 'ok', resource } as ResourceRemoveOutput);
export const removeNotFound = (locator: string): ResourceRemoveOutput => ({ variant: 'notFound', locator } as ResourceRemoveOutput);

export const diffOk = (changeType: string): ResourceDiffOutput => ({ variant: 'ok', changeType } as ResourceDiffOutput);
export const diffUnknown = (message: string): ResourceDiffOutput => ({ variant: 'unknown', message } as ResourceDiffOutput);

