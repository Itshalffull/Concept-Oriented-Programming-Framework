// Merge â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for Merge
export interface MergeStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface MergeRegisterStrategyInput {
  readonly name: string;
  readonly contentTypes: readonly string[];
}

export interface MergeRegisterStrategyOutputOk {
  readonly variant: 'ok';
  readonly strategy: unknown;
}

export interface MergeRegisterStrategyOutputDuplicate {
  readonly variant: 'duplicate';
  readonly message: string;
}

export type MergeRegisterStrategyOutput = MergeRegisterStrategyOutputOk | MergeRegisterStrategyOutputDuplicate;

export interface MergeMergeInput {
  readonly base: string;
  readonly ours: string;
  readonly theirs: string;
  readonly strategy: O.Option<string>;
}

export interface MergeMergeOutputClean {
  readonly variant: 'clean';
  readonly result: string;
}

export interface MergeMergeOutputConflicts {
  readonly variant: 'conflicts';
  readonly mergeId: unknown;
  readonly conflictCount: number;
}

export interface MergeMergeOutputNoStrategy {
  readonly variant: 'noStrategy';
  readonly message: string;
}

export type MergeMergeOutput = MergeMergeOutputClean | MergeMergeOutputConflicts | MergeMergeOutputNoStrategy;

export interface MergeResolveConflictInput {
  readonly mergeId: unknown;
  readonly conflictIndex: number;
  readonly resolution: Buffer;
}

export interface MergeResolveConflictOutputOk {
  readonly variant: 'ok';
  readonly remaining: number;
}

export interface MergeResolveConflictOutputInvalidIndex {
  readonly variant: 'invalidIndex';
  readonly message: string;
}

export interface MergeResolveConflictOutputAlreadyResolved {
  readonly variant: 'alreadyResolved';
  readonly message: string;
}

export type MergeResolveConflictOutput = MergeResolveConflictOutputOk | MergeResolveConflictOutputInvalidIndex | MergeResolveConflictOutputAlreadyResolved;

export interface MergeFinalizeInput {
  readonly mergeId: unknown;
}

export interface MergeFinalizeOutputOk {
  readonly variant: 'ok';
  readonly result: string;
}

export interface MergeFinalizeOutputUnresolvedConflicts {
  readonly variant: 'unresolvedConflicts';
  readonly count: number;
}

export type MergeFinalizeOutput = MergeFinalizeOutputOk | MergeFinalizeOutputUnresolvedConflicts;

// --- Variant constructors ---

export const registerStrategyOk = (strategy: unknown): MergeRegisterStrategyOutput => ({ variant: 'ok', strategy } as MergeRegisterStrategyOutput);
export const registerStrategyDuplicate = (message: string): MergeRegisterStrategyOutput => ({ variant: 'duplicate', message } as MergeRegisterStrategyOutput);

export const mergeClean = (result: string): MergeMergeOutput => ({ variant: 'clean', result } as MergeMergeOutput);
export const mergeConflicts = (mergeId: unknown, conflictCount: number): MergeMergeOutput => ({ variant: 'conflicts', mergeId, conflictCount } as MergeMergeOutput);
export const mergeNoStrategy = (message: string): MergeMergeOutput => ({ variant: 'noStrategy', message } as MergeMergeOutput);

export const resolveConflictOk = (remaining: number): MergeResolveConflictOutput => ({ variant: 'ok', remaining } as MergeResolveConflictOutput);
export const resolveConflictInvalidIndex = (message: string): MergeResolveConflictOutput => ({ variant: 'invalidIndex', message } as MergeResolveConflictOutput);
export const resolveConflictAlreadyResolved = (message: string): MergeResolveConflictOutput => ({ variant: 'alreadyResolved', message } as MergeResolveConflictOutput);

export const finalizeOk = (result: string): MergeFinalizeOutput => ({ variant: 'ok', result } as MergeFinalizeOutput);
export const finalizeUnresolvedConflicts = (count: number): MergeFinalizeOutput => ({ variant: 'unresolvedConflicts', count } as MergeFinalizeOutput);

