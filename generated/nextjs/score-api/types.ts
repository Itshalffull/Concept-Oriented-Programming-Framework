// ScoreApi â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for ScoreApi
export interface ScoreApiStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface ScoreApiListFilesInput {
  readonly pattern: string;
}

export interface ScoreApiListFilesOutputOk {
  readonly variant: 'ok';
  readonly files: readonly { readonly path: string; readonly language: string; readonly role: string; readonly size: number }[];
}

export interface ScoreApiListFilesOutputEmpty {
  readonly variant: 'empty';
  readonly pattern: string;
}

export type ScoreApiListFilesOutput = ScoreApiListFilesOutputOk | ScoreApiListFilesOutputEmpty;

export interface ScoreApiGetFileTreeInput {
  readonly path: string;
  readonly depth: number;
}

export interface ScoreApiGetFileTreeOutputOk {
  readonly variant: 'ok';
  readonly tree: string;
  readonly fileCount: number;
  readonly dirCount: number;
}

export interface ScoreApiGetFileTreeOutputNotFound {
  readonly variant: 'notFound';
  readonly path: string;
}

export type ScoreApiGetFileTreeOutput = ScoreApiGetFileTreeOutputOk | ScoreApiGetFileTreeOutputNotFound;

export interface ScoreApiGetFileContentInput {
  readonly path: string;
}

export interface ScoreApiGetFileContentOutputOk {
  readonly variant: 'ok';
  readonly content: string;
  readonly language: string;
  readonly definitions: readonly string[];
}

export interface ScoreApiGetFileContentOutputNotFound {
  readonly variant: 'notFound';
  readonly path: string;
}

export type ScoreApiGetFileContentOutput = ScoreApiGetFileContentOutputOk | ScoreApiGetFileContentOutputNotFound;

export interface ScoreApiGetDefinitionsInput {
  readonly path: string;
}

export interface ScoreApiGetDefinitionsOutputOk {
  readonly variant: 'ok';
  readonly definitions: readonly { readonly name: string; readonly kind: string; readonly line: number; readonly span: string }[];
}

export interface ScoreApiGetDefinitionsOutputNotFound {
  readonly variant: 'notFound';
  readonly path: string;
}

export type ScoreApiGetDefinitionsOutput = ScoreApiGetDefinitionsOutputOk | ScoreApiGetDefinitionsOutputNotFound;

export interface ScoreApiMatchPatternInput {
  readonly pattern: string;
  readonly language: string;
}

export interface ScoreApiMatchPatternOutputOk {
  readonly variant: 'ok';
  readonly matches: readonly { readonly file: string; readonly line: number; readonly text: string; readonly context: string }[];
}

export interface ScoreApiMatchPatternOutputInvalidPattern {
  readonly variant: 'invalidPattern';
  readonly pattern: string;
  readonly error: string;
}

export type ScoreApiMatchPatternOutput = ScoreApiMatchPatternOutputOk | ScoreApiMatchPatternOutputInvalidPattern;

export interface ScoreApiFindSymbolInput {
  readonly name: string;
}

export interface ScoreApiFindSymbolOutputOk {
  readonly variant: 'ok';
  readonly symbols: readonly { readonly name: string; readonly kind: string; readonly file: string; readonly line: number; readonly scope: string }[];
}

export interface ScoreApiFindSymbolOutputNotFound {
  readonly variant: 'notFound';
  readonly name: string;
}

export type ScoreApiFindSymbolOutput = ScoreApiFindSymbolOutputOk | ScoreApiFindSymbolOutputNotFound;

export interface ScoreApiGetReferencesInput {
  readonly symbol: string;
}

export interface ScoreApiGetReferencesOutputOk {
  readonly variant: 'ok';
  readonly definition: { readonly file: string; readonly line: number };
  readonly references: readonly { readonly file: string; readonly line: number; readonly kind: string }[];
}

export interface ScoreApiGetReferencesOutputNotFound {
  readonly variant: 'notFound';
  readonly symbol: string;
}

export type ScoreApiGetReferencesOutput = ScoreApiGetReferencesOutputOk | ScoreApiGetReferencesOutputNotFound;

export interface ScoreApiGetScopeInput {
  readonly file: string;
  readonly line: number;
}

export interface ScoreApiGetScopeOutputOk {
  readonly variant: 'ok';
  readonly scope: string;
  readonly symbols: readonly { readonly name: string; readonly kind: string }[];
  readonly parent: O.Option<string>;
}

export interface ScoreApiGetScopeOutputNotFound {
  readonly variant: 'notFound';
  readonly file: string;
}

export type ScoreApiGetScopeOutput = ScoreApiGetScopeOutputOk | ScoreApiGetScopeOutputNotFound;

export interface ScoreApiGetRelationshipsInput {
  readonly symbol: string;
}

export interface ScoreApiGetRelationshipsOutputOk {
  readonly variant: 'ok';
  readonly relationships: readonly { readonly from: string; readonly to: string; readonly kind: string; readonly file: string }[];
}

export interface ScoreApiGetRelationshipsOutputNotFound {
  readonly variant: 'notFound';
  readonly symbol: string;
}

export type ScoreApiGetRelationshipsOutput = ScoreApiGetRelationshipsOutputOk | ScoreApiGetRelationshipsOutputNotFound;

export interface ScoreApiListConceptsInput {
}

export interface ScoreApiListConceptsOutput {
  readonly variant: 'ok';
  readonly concepts: readonly { readonly name: string; readonly purpose: string; readonly actions: readonly string[]; readonly stateFields: readonly string[]; readonly file: string }[];
}

export interface ScoreApiGetConceptInput {
  readonly name: string;
}

export interface ScoreApiGetConceptOutputOk {
  readonly variant: 'ok';
  readonly concept: { readonly name: string; readonly purpose: string; readonly typeParams: readonly string[]; readonly actions: readonly { readonly name: string; readonly params: readonly string[]; readonly variants: readonly string[] }[]; readonly stateFields: readonly { readonly name: string; readonly type: string; readonly relation: string }[]; readonly invariants: readonly string[]; readonly file: string };
}

export interface ScoreApiGetConceptOutputNotFound {
  readonly variant: 'notFound';
  readonly name: string;
}

export type ScoreApiGetConceptOutput = ScoreApiGetConceptOutputOk | ScoreApiGetConceptOutputNotFound;

export interface ScoreApiGetActionInput {
  readonly concept: string;
  readonly action: string;
}

export interface ScoreApiGetActionOutputOk {
  readonly variant: 'ok';
  readonly action: { readonly name: string; readonly params: readonly { readonly name: string; readonly type: string }[]; readonly variants: readonly { readonly name: string; readonly fields: readonly string[]; readonly prose: string }[]; readonly description: string };
}

export interface ScoreApiGetActionOutputNotFound {
  readonly variant: 'notFound';
  readonly concept: string;
  readonly action: string;
}

export type ScoreApiGetActionOutput = ScoreApiGetActionOutputOk | ScoreApiGetActionOutputNotFound;

export interface ScoreApiListSyncsInput {
}

export interface ScoreApiListSyncsOutput {
  readonly variant: 'ok';
  readonly syncs: readonly { readonly name: string; readonly annotation: string; readonly triggers: readonly string[]; readonly effects: readonly string[]; readonly file: string }[];
}

export interface ScoreApiGetSyncInput {
  readonly name: string;
}

export interface ScoreApiGetSyncOutputOk {
  readonly variant: 'ok';
  readonly sync: { readonly name: string; readonly annotation: string; readonly when: readonly { readonly concept: string; readonly action: string; readonly bindings: readonly string[] }[]; readonly where: readonly string[]; readonly then: readonly { readonly concept: string; readonly action: string; readonly bindings: readonly string[] }[]; readonly file: string };
}

export interface ScoreApiGetSyncOutputNotFound {
  readonly variant: 'notFound';
  readonly name: string;
}

export type ScoreApiGetSyncOutput = ScoreApiGetSyncOutputOk | ScoreApiGetSyncOutputNotFound;

export interface ScoreApiGetFlowInput {
  readonly startConcept: string;
  readonly startAction: string;
}

export interface ScoreApiGetFlowOutputOk {
  readonly variant: 'ok';
  readonly flow: readonly { readonly step: number; readonly concept: string; readonly action: string; readonly sync: string; readonly variant: string }[];
}

export interface ScoreApiGetFlowOutputNotFound {
  readonly variant: 'notFound';
  readonly concept: string;
  readonly action: string;
}

export type ScoreApiGetFlowOutput = ScoreApiGetFlowOutputOk | ScoreApiGetFlowOutputNotFound;

export interface ScoreApiGetDependenciesInput {
  readonly symbol: string;
}

export interface ScoreApiGetDependenciesOutputOk {
  readonly variant: 'ok';
  readonly directDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[];
  readonly transitiveDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[];
}

export interface ScoreApiGetDependenciesOutputNotFound {
  readonly variant: 'notFound';
  readonly symbol: string;
}

export type ScoreApiGetDependenciesOutput = ScoreApiGetDependenciesOutputOk | ScoreApiGetDependenciesOutputNotFound;

export interface ScoreApiGetDependentsInput {
  readonly symbol: string;
}

export interface ScoreApiGetDependentsOutputOk {
  readonly variant: 'ok';
  readonly directDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[];
  readonly transitiveDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[];
}

export interface ScoreApiGetDependentsOutputNotFound {
  readonly variant: 'notFound';
  readonly symbol: string;
}

export type ScoreApiGetDependentsOutput = ScoreApiGetDependentsOutputOk | ScoreApiGetDependentsOutputNotFound;

export interface ScoreApiGetImpactInput {
  readonly file: string;
}

export interface ScoreApiGetImpactOutputOk {
  readonly variant: 'ok';
  readonly directImpact: readonly { readonly file: string; readonly reason: string }[];
  readonly transitiveImpact: readonly { readonly file: string; readonly reason: string }[];
}

export interface ScoreApiGetImpactOutputNotFound {
  readonly variant: 'notFound';
  readonly file: string;
}

export type ScoreApiGetImpactOutput = ScoreApiGetImpactOutputOk | ScoreApiGetImpactOutputNotFound;

export interface ScoreApiGetDataFlowInput {
  readonly from: string;
  readonly to: string;
}

export interface ScoreApiGetDataFlowOutputOk {
  readonly variant: 'ok';
  readonly paths: readonly { readonly hops: readonly { readonly symbol: string; readonly file: string; readonly kind: string }[]; readonly length: number }[];
}

export interface ScoreApiGetDataFlowOutputNoPath {
  readonly variant: 'noPath';
  readonly from: string;
  readonly to: string;
}

export type ScoreApiGetDataFlowOutput = ScoreApiGetDataFlowOutputOk | ScoreApiGetDataFlowOutputNoPath;

export interface ScoreApiSearchInput {
  readonly query: string;
  readonly limit: number;
}

export interface ScoreApiSearchOutputOk {
  readonly variant: 'ok';
  readonly results: readonly { readonly name: string; readonly kind: string; readonly file: string; readonly line: number; readonly score: number; readonly snippet: string }[];
}

export interface ScoreApiSearchOutputEmpty {
  readonly variant: 'empty';
  readonly query: string;
}

export type ScoreApiSearchOutput = ScoreApiSearchOutputOk | ScoreApiSearchOutputEmpty;

export interface ScoreApiExplainInput {
  readonly symbol: string;
}

export interface ScoreApiExplainOutputOk {
  readonly variant: 'ok';
  readonly summary: string;
  readonly kind: string;
  readonly definedIn: string;
  readonly usedBy: readonly string[];
  readonly relationships: readonly string[];
}

export interface ScoreApiExplainOutputNotFound {
  readonly variant: 'notFound';
  readonly symbol: string;
}

export type ScoreApiExplainOutput = ScoreApiExplainOutputOk | ScoreApiExplainOutputNotFound;

export interface ScoreApiStatusInput {
}

export interface ScoreApiStatusOutput {
  readonly variant: 'ok';
  readonly indexed: boolean;
  readonly conceptCount: number;
  readonly symbolCount: number;
  readonly fileCount: number;
  readonly syncCount: number;
  readonly lastIndexed: Date;
}

export interface ScoreApiReindexInput {
}

export interface ScoreApiReindexOutputOk {
  readonly variant: 'ok';
  readonly conceptCount: number;
  readonly symbolCount: number;
  readonly fileCount: number;
  readonly syncCount: number;
  readonly duration: number;
}

export interface ScoreApiReindexOutputInProgress {
  readonly variant: 'inProgress';
  readonly startedAt: Date;
}

export type ScoreApiReindexOutput = ScoreApiReindexOutputOk | ScoreApiReindexOutputInProgress;

// --- Variant constructors ---

export const listFilesOk = (files: readonly { readonly path: string; readonly language: string; readonly role: string; readonly size: number }[]): ScoreApiListFilesOutput => ({ variant: 'ok', files } as ScoreApiListFilesOutput);
export const listFilesEmpty = (pattern: string): ScoreApiListFilesOutput => ({ variant: 'empty', pattern } as ScoreApiListFilesOutput);

export const getFileTreeOk = (tree: string, fileCount: number, dirCount: number): ScoreApiGetFileTreeOutput => ({ variant: 'ok', tree, fileCount, dirCount } as ScoreApiGetFileTreeOutput);
export const getFileTreeNotFound = (path: string): ScoreApiGetFileTreeOutput => ({ variant: 'notFound', path } as ScoreApiGetFileTreeOutput);

export const getFileContentOk = (content: string, language: string, definitions: readonly string[]): ScoreApiGetFileContentOutput => ({ variant: 'ok', content, language, definitions } as ScoreApiGetFileContentOutput);
export const getFileContentNotFound = (path: string): ScoreApiGetFileContentOutput => ({ variant: 'notFound', path } as ScoreApiGetFileContentOutput);

export const getDefinitionsOk = (definitions: readonly { readonly name: string; readonly kind: string; readonly line: number; readonly span: string }[]): ScoreApiGetDefinitionsOutput => ({ variant: 'ok', definitions } as ScoreApiGetDefinitionsOutput);
export const getDefinitionsNotFound = (path: string): ScoreApiGetDefinitionsOutput => ({ variant: 'notFound', path } as ScoreApiGetDefinitionsOutput);

export const matchPatternOk = (matches: readonly { readonly file: string; readonly line: number; readonly text: string; readonly context: string }[]): ScoreApiMatchPatternOutput => ({ variant: 'ok', matches } as ScoreApiMatchPatternOutput);
export const matchPatternInvalidPattern = (pattern: string, error: string): ScoreApiMatchPatternOutput => ({ variant: 'invalidPattern', pattern, error } as ScoreApiMatchPatternOutput);

export const findSymbolOk = (symbols: readonly { readonly name: string; readonly kind: string; readonly file: string; readonly line: number; readonly scope: string }[]): ScoreApiFindSymbolOutput => ({ variant: 'ok', symbols } as ScoreApiFindSymbolOutput);
export const findSymbolNotFound = (name: string): ScoreApiFindSymbolOutput => ({ variant: 'notFound', name } as ScoreApiFindSymbolOutput);

export const getReferencesOk = (definition: { readonly file: string; readonly line: number }, references: readonly { readonly file: string; readonly line: number; readonly kind: string }[]): ScoreApiGetReferencesOutput => ({ variant: 'ok', definition, references } as ScoreApiGetReferencesOutput);
export const getReferencesNotFound = (symbol: string): ScoreApiGetReferencesOutput => ({ variant: 'notFound', symbol } as ScoreApiGetReferencesOutput);

export const getScopeOk = (scope: string, symbols: readonly { readonly name: string; readonly kind: string }[], parent: O.Option<string>): ScoreApiGetScopeOutput => ({ variant: 'ok', scope, symbols, parent } as ScoreApiGetScopeOutput);
export const getScopeNotFound = (file: string): ScoreApiGetScopeOutput => ({ variant: 'notFound', file } as ScoreApiGetScopeOutput);

export const getRelationshipsOk = (relationships: readonly { readonly from: string; readonly to: string; readonly kind: string; readonly file: string }[]): ScoreApiGetRelationshipsOutput => ({ variant: 'ok', relationships } as ScoreApiGetRelationshipsOutput);
export const getRelationshipsNotFound = (symbol: string): ScoreApiGetRelationshipsOutput => ({ variant: 'notFound', symbol } as ScoreApiGetRelationshipsOutput);

export const listConceptsOk = (concepts: readonly { readonly name: string; readonly purpose: string; readonly actions: readonly string[]; readonly stateFields: readonly string[]; readonly file: string }[]): ScoreApiListConceptsOutput => ({ variant: 'ok', concepts } as ScoreApiListConceptsOutput);

export const getConceptOk = (concept: { readonly name: string; readonly purpose: string; readonly typeParams: readonly string[]; readonly actions: readonly { readonly name: string; readonly params: readonly string[]; readonly variants: readonly string[] }[]; readonly stateFields: readonly { readonly name: string; readonly type: string; readonly relation: string }[]; readonly invariants: readonly string[]; readonly file: string }): ScoreApiGetConceptOutput => ({ variant: 'ok', concept } as ScoreApiGetConceptOutput);
export const getConceptNotFound = (name: string): ScoreApiGetConceptOutput => ({ variant: 'notFound', name } as ScoreApiGetConceptOutput);

export const getActionOk = (action: { readonly name: string; readonly params: readonly { readonly name: string; readonly type: string }[]; readonly variants: readonly { readonly name: string; readonly fields: readonly string[]; readonly prose: string }[]; readonly description: string }): ScoreApiGetActionOutput => ({ variant: 'ok', action } as ScoreApiGetActionOutput);
export const getActionNotFound = (concept: string, action: string): ScoreApiGetActionOutput => ({ variant: 'notFound', concept, action } as ScoreApiGetActionOutput);

export const listSyncsOk = (syncs: readonly { readonly name: string; readonly annotation: string; readonly triggers: readonly string[]; readonly effects: readonly string[]; readonly file: string }[]): ScoreApiListSyncsOutput => ({ variant: 'ok', syncs } as ScoreApiListSyncsOutput);

export const getSyncOk = (sync: { readonly name: string; readonly annotation: string; readonly when: readonly { readonly concept: string; readonly action: string; readonly bindings: readonly string[] }[]; readonly where: readonly string[]; readonly then: readonly { readonly concept: string; readonly action: string; readonly bindings: readonly string[] }[]; readonly file: string }): ScoreApiGetSyncOutput => ({ variant: 'ok', sync } as ScoreApiGetSyncOutput);
export const getSyncNotFound = (name: string): ScoreApiGetSyncOutput => ({ variant: 'notFound', name } as ScoreApiGetSyncOutput);

export const getFlowOk = (flow: readonly { readonly step: number; readonly concept: string; readonly action: string; readonly sync: string; readonly variant: string }[]): ScoreApiGetFlowOutput => ({ variant: 'ok', flow } as ScoreApiGetFlowOutput);
export const getFlowNotFound = (concept: string, action: string): ScoreApiGetFlowOutput => ({ variant: 'notFound', concept, action } as ScoreApiGetFlowOutput);

export const getDependenciesOk = (directDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[], transitiveDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[]): ScoreApiGetDependenciesOutput => ({ variant: 'ok', directDeps, transitiveDeps } as ScoreApiGetDependenciesOutput);
export const getDependenciesNotFound = (symbol: string): ScoreApiGetDependenciesOutput => ({ variant: 'notFound', symbol } as ScoreApiGetDependenciesOutput);

export const getDependentsOk = (directDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[], transitiveDeps: readonly { readonly name: string; readonly kind: string; readonly file: string }[]): ScoreApiGetDependentsOutput => ({ variant: 'ok', directDeps, transitiveDeps } as ScoreApiGetDependentsOutput);
export const getDependentsNotFound = (symbol: string): ScoreApiGetDependentsOutput => ({ variant: 'notFound', symbol } as ScoreApiGetDependentsOutput);

export const getImpactOk = (directImpact: readonly { readonly file: string; readonly reason: string }[], transitiveImpact: readonly { readonly file: string; readonly reason: string }[]): ScoreApiGetImpactOutput => ({ variant: 'ok', directImpact, transitiveImpact } as ScoreApiGetImpactOutput);
export const getImpactNotFound = (file: string): ScoreApiGetImpactOutput => ({ variant: 'notFound', file } as ScoreApiGetImpactOutput);

export const getDataFlowOk = (paths: readonly { readonly hops: readonly { readonly symbol: string; readonly file: string; readonly kind: string }[]; readonly length: number }[]): ScoreApiGetDataFlowOutput => ({ variant: 'ok', paths } as ScoreApiGetDataFlowOutput);
export const getDataFlowNoPath = (from: string, to: string): ScoreApiGetDataFlowOutput => ({ variant: 'noPath', from, to } as ScoreApiGetDataFlowOutput);

export const searchOk = (results: readonly { readonly name: string; readonly kind: string; readonly file: string; readonly line: number; readonly score: number; readonly snippet: string }[]): ScoreApiSearchOutput => ({ variant: 'ok', results } as ScoreApiSearchOutput);
export const searchEmpty = (query: string): ScoreApiSearchOutput => ({ variant: 'empty', query } as ScoreApiSearchOutput);

export const explainOk = (summary: string, kind: string, definedIn: string, usedBy: readonly string[], relationships: readonly string[]): ScoreApiExplainOutput => ({ variant: 'ok', summary, kind, definedIn, usedBy, relationships } as ScoreApiExplainOutput);
export const explainNotFound = (symbol: string): ScoreApiExplainOutput => ({ variant: 'notFound', symbol } as ScoreApiExplainOutput);

export const statusOk = (indexed: boolean, conceptCount: number, symbolCount: number, fileCount: number, syncCount: number, lastIndexed: Date): ScoreApiStatusOutput => ({ variant: 'ok', indexed, conceptCount, symbolCount, fileCount, syncCount, lastIndexed } as ScoreApiStatusOutput);

export const reindexOk = (conceptCount: number, symbolCount: number, fileCount: number, syncCount: number, duration: number): ScoreApiReindexOutput => ({ variant: 'ok', conceptCount, symbolCount, fileCount, syncCount, duration } as ScoreApiReindexOutput);
export const reindexInProgress = (startedAt: Date): ScoreApiReindexOutput => ({ variant: 'inProgress', startedAt } as ScoreApiReindexOutput);

