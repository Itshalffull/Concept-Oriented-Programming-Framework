// SolidityBuilder â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for SolidityBuilder
export interface SolidityBuilderStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface SolidityBuilderBuildInput {
  readonly source: string;
  readonly toolchainPath: string;
  readonly platform: string;
  readonly config: { readonly mode: string; readonly features: O.Option<readonly string[]> };
}

export interface SolidityBuilderBuildOutputOk {
  readonly variant: 'ok';
  readonly build: string;
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface SolidityBuilderBuildOutputCompilationError {
  readonly variant: 'compilationError';
  readonly errors: readonly { readonly file: string; readonly line: number; readonly message: string }[];
}

export interface SolidityBuilderBuildOutputPragmaMismatch {
  readonly variant: 'pragmaMismatch';
  readonly required: string;
  readonly installed: string;
}

export type SolidityBuilderBuildOutput = SolidityBuilderBuildOutputOk | SolidityBuilderBuildOutputCompilationError | SolidityBuilderBuildOutputPragmaMismatch;

export interface SolidityBuilderTestInput {
  readonly build: string;
  readonly toolchainPath: string;
  readonly invocation: O.Option<{ readonly command: string; readonly args: readonly string[]; readonly outputFormat: string; readonly configFile: O.Option<string>; readonly env: O.Option<string> }>;
  readonly testType: O.Option<string>;
}

export interface SolidityBuilderTestOutputOk {
  readonly variant: 'ok';
  readonly passed: number;
  readonly failed: number;
  readonly skipped: number;
  readonly duration: number;
  readonly testType: string;
}

export interface SolidityBuilderTestOutputTestFailure {
  readonly variant: 'testFailure';
  readonly passed: number;
  readonly failed: number;
  readonly failures: readonly { readonly test: string; readonly message: string }[];
  readonly testType: string;
}

export type SolidityBuilderTestOutput = SolidityBuilderTestOutputOk | SolidityBuilderTestOutputTestFailure;

export interface SolidityBuilderPackageInput {
  readonly build: string;
  readonly format: string;
}

export interface SolidityBuilderPackageOutputOk {
  readonly variant: 'ok';
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface SolidityBuilderPackageOutputFormatUnsupported {
  readonly variant: 'formatUnsupported';
  readonly format: string;
}

export type SolidityBuilderPackageOutput = SolidityBuilderPackageOutputOk | SolidityBuilderPackageOutputFormatUnsupported;

export interface SolidityBuilderRegisterInput {
}

export interface SolidityBuilderRegisterOutput {
  readonly variant: 'ok';
  readonly name: string;
  readonly language: string;
  readonly capabilities: readonly string[];
}

// --- Variant constructors ---

export const buildOk = (build: string, artifactPath: string, artifactHash: string): SolidityBuilderBuildOutput => ({ variant: 'ok', build, artifactPath, artifactHash } as SolidityBuilderBuildOutput);
export const buildCompilationError = (errors: readonly { readonly file: string; readonly line: number; readonly message: string }[]): SolidityBuilderBuildOutput => ({ variant: 'compilationError', errors } as SolidityBuilderBuildOutput);
export const buildPragmaMismatch = (required: string, installed: string): SolidityBuilderBuildOutput => ({ variant: 'pragmaMismatch', required, installed } as SolidityBuilderBuildOutput);

export const testOk = (passed: number, failed: number, skipped: number, duration: number, testType: string): SolidityBuilderTestOutput => ({ variant: 'ok', passed, failed, skipped, duration, testType } as SolidityBuilderTestOutput);
export const testTestFailure = (passed: number, failed: number, failures: readonly { readonly test: string; readonly message: string }[], testType: string): SolidityBuilderTestOutput => ({ variant: 'testFailure', passed, failed, failures, testType } as SolidityBuilderTestOutput);

export const packageOk = (artifactPath: string, artifactHash: string): SolidityBuilderPackageOutput => ({ variant: 'ok', artifactPath, artifactHash } as SolidityBuilderPackageOutput);
export const packageFormatUnsupported = (format: string): SolidityBuilderPackageOutput => ({ variant: 'formatUnsupported', format } as SolidityBuilderPackageOutput);

export const registerOk = (name: string, language: string, capabilities: readonly string[]): SolidityBuilderRegisterOutput => ({ variant: 'ok', name, language, capabilities } as SolidityBuilderRegisterOutput);

