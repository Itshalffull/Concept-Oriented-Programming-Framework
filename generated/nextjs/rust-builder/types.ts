// RustBuilder â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for RustBuilder
export interface RustBuilderStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface RustBuilderBuildInput {
  readonly source: string;
  readonly toolchainPath: string;
  readonly platform: string;
  readonly config: { readonly mode: string; readonly features: O.Option<readonly string[]> };
}

export interface RustBuilderBuildOutputOk {
  readonly variant: 'ok';
  readonly build: string;
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface RustBuilderBuildOutputCompilationError {
  readonly variant: 'compilationError';
  readonly errors: readonly { readonly file: string; readonly line: number; readonly message: string }[];
}

export interface RustBuilderBuildOutputFeatureConflict {
  readonly variant: 'featureConflict';
  readonly conflicting: readonly string[];
}

export type RustBuilderBuildOutput = RustBuilderBuildOutputOk | RustBuilderBuildOutputCompilationError | RustBuilderBuildOutputFeatureConflict;

export interface RustBuilderTestInput {
  readonly build: string;
  readonly toolchainPath: string;
  readonly invocation: O.Option<{ readonly command: string; readonly args: readonly string[]; readonly outputFormat: string; readonly configFile: O.Option<string>; readonly env: O.Option<string> }>;
  readonly testType: O.Option<string>;
}

export interface RustBuilderTestOutputOk {
  readonly variant: 'ok';
  readonly passed: number;
  readonly failed: number;
  readonly skipped: number;
  readonly duration: number;
  readonly testType: string;
}

export interface RustBuilderTestOutputTestFailure {
  readonly variant: 'testFailure';
  readonly passed: number;
  readonly failed: number;
  readonly failures: readonly { readonly test: string; readonly message: string }[];
  readonly testType: string;
}

export type RustBuilderTestOutput = RustBuilderTestOutputOk | RustBuilderTestOutputTestFailure;

export interface RustBuilderPackageInput {
  readonly build: string;
  readonly format: string;
}

export interface RustBuilderPackageOutputOk {
  readonly variant: 'ok';
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface RustBuilderPackageOutputFormatUnsupported {
  readonly variant: 'formatUnsupported';
  readonly format: string;
}

export type RustBuilderPackageOutput = RustBuilderPackageOutputOk | RustBuilderPackageOutputFormatUnsupported;

export interface RustBuilderRegisterInput {
}

export interface RustBuilderRegisterOutput {
  readonly variant: 'ok';
  readonly name: string;
  readonly language: string;
  readonly capabilities: readonly string[];
}

// --- Variant constructors ---

export const buildOk = (build: string, artifactPath: string, artifactHash: string): RustBuilderBuildOutput => ({ variant: 'ok', build, artifactPath, artifactHash } as RustBuilderBuildOutput);
export const buildCompilationError = (errors: readonly { readonly file: string; readonly line: number; readonly message: string }[]): RustBuilderBuildOutput => ({ variant: 'compilationError', errors } as RustBuilderBuildOutput);
export const buildFeatureConflict = (conflicting: readonly string[]): RustBuilderBuildOutput => ({ variant: 'featureConflict', conflicting } as RustBuilderBuildOutput);

export const testOk = (passed: number, failed: number, skipped: number, duration: number, testType: string): RustBuilderTestOutput => ({ variant: 'ok', passed, failed, skipped, duration, testType } as RustBuilderTestOutput);
export const testTestFailure = (passed: number, failed: number, failures: readonly { readonly test: string; readonly message: string }[], testType: string): RustBuilderTestOutput => ({ variant: 'testFailure', passed, failed, failures, testType } as RustBuilderTestOutput);

export const packageOk = (artifactPath: string, artifactHash: string): RustBuilderPackageOutput => ({ variant: 'ok', artifactPath, artifactHash } as RustBuilderPackageOutput);
export const packageFormatUnsupported = (format: string): RustBuilderPackageOutput => ({ variant: 'formatUnsupported', format } as RustBuilderPackageOutput);

export const registerOk = (name: string, language: string, capabilities: readonly string[]): RustBuilderRegisterOutput => ({ variant: 'ok', name, language, capabilities } as RustBuilderRegisterOutput);

