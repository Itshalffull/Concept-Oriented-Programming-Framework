// ChainMonitor â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for ChainMonitor
export interface ChainMonitorStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface ChainMonitorAwaitFinalityInput {
  readonly txHash: string;
  readonly level: string;
}

export interface ChainMonitorAwaitFinalityOutputOk {
  readonly variant: 'ok';
  readonly chain: string;
  readonly block: number;
  readonly confirmations: number;
}

export interface ChainMonitorAwaitFinalityOutputReorged {
  readonly variant: 'reorged';
  readonly txHash: string;
  readonly depth: number;
}

export interface ChainMonitorAwaitFinalityOutputTimeout {
  readonly variant: 'timeout';
  readonly txHash: string;
}

export type ChainMonitorAwaitFinalityOutput = ChainMonitorAwaitFinalityOutputOk | ChainMonitorAwaitFinalityOutputReorged | ChainMonitorAwaitFinalityOutputTimeout;

export interface ChainMonitorSubscribeInput {
  readonly chainId: number;
  readonly rpcUrl: string;
}

export interface ChainMonitorSubscribeOutputOk {
  readonly variant: 'ok';
  readonly chainId: number;
}

export interface ChainMonitorSubscribeOutputError {
  readonly variant: 'error';
  readonly message: string;
}

export type ChainMonitorSubscribeOutput = ChainMonitorSubscribeOutputOk | ChainMonitorSubscribeOutputError;

export interface ChainMonitorOnBlockInput {
  readonly chainId: number;
  readonly blockNumber: number;
  readonly blockHash: string;
}

export interface ChainMonitorOnBlockOutputOk {
  readonly variant: 'ok';
  readonly chainId: number;
  readonly blockNumber: number;
}

export interface ChainMonitorOnBlockOutputReorg {
  readonly variant: 'reorg';
  readonly chainId: number;
  readonly depth: number;
  readonly fromBlock: number;
}

export type ChainMonitorOnBlockOutput = ChainMonitorOnBlockOutputOk | ChainMonitorOnBlockOutputReorg;

// --- Variant constructors ---

export const awaitFinalityOk = (chain: string, block: number, confirmations: number): ChainMonitorAwaitFinalityOutput => ({ variant: 'ok', chain, block, confirmations } as ChainMonitorAwaitFinalityOutput);
export const awaitFinalityReorged = (txHash: string, depth: number): ChainMonitorAwaitFinalityOutput => ({ variant: 'reorged', txHash, depth } as ChainMonitorAwaitFinalityOutput);
export const awaitFinalityTimeout = (txHash: string): ChainMonitorAwaitFinalityOutput => ({ variant: 'timeout', txHash } as ChainMonitorAwaitFinalityOutput);

export const subscribeOk = (chainId: number): ChainMonitorSubscribeOutput => ({ variant: 'ok', chainId } as ChainMonitorSubscribeOutput);
export const subscribeError = (message: string): ChainMonitorSubscribeOutput => ({ variant: 'error', message } as ChainMonitorSubscribeOutput);

export const onBlockOk = (chainId: number, blockNumber: number): ChainMonitorOnBlockOutput => ({ variant: 'ok', chainId, blockNumber } as ChainMonitorOnBlockOutput);
export const onBlockReorg = (chainId: number, depth: number, fromBlock: number): ChainMonitorOnBlockOutput => ({ variant: 'reorg', chainId, depth, fromBlock } as ChainMonitorOnBlockOutput);

