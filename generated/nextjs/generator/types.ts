// Generator â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for Generator
export interface GeneratorStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface GeneratorPlanInput {
  readonly kit: string;
  readonly interfaceManifest: string;
}

export interface GeneratorPlanOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly targets: readonly string[];
  readonly concepts: readonly string[];
  readonly estimatedFiles: number;
}

export interface GeneratorPlanOutputNoTargetsConfigured {
  readonly variant: 'noTargetsConfigured';
  readonly kit: string;
}

export interface GeneratorPlanOutputMissingProvider {
  readonly variant: 'missingProvider';
  readonly target: string;
}

export interface GeneratorPlanOutputProjectionFailed {
  readonly variant: 'projectionFailed';
  readonly concept: string;
  readonly reason: string;
}

export type GeneratorPlanOutput = GeneratorPlanOutputOk | GeneratorPlanOutputNoTargetsConfigured | GeneratorPlanOutputMissingProvider | GeneratorPlanOutputProjectionFailed;

export interface GeneratorGenerateInput {
  readonly plan: string;
}

export interface GeneratorGenerateOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly filesGenerated: number;
  readonly filesUnchanged: number;
  readonly duration: number;
}

export interface GeneratorGenerateOutputPartial {
  readonly variant: 'partial';
  readonly plan: string;
  readonly generated: readonly string[];
  readonly failed: readonly string[];
}

export interface GeneratorGenerateOutputBlocked {
  readonly variant: 'blocked';
  readonly plan: string;
  readonly breakingChanges: readonly string[];
}

export type GeneratorGenerateOutput = GeneratorGenerateOutputOk | GeneratorGenerateOutputPartial | GeneratorGenerateOutputBlocked;

export interface GeneratorRegenerateInput {
  readonly plan: string;
  readonly targets: readonly string[];
}

export interface GeneratorRegenerateOutput {
  readonly variant: 'ok';
  readonly plan: string;
  readonly filesRegenerated: number;
}

// --- Variant constructors ---

export const planOk = (plan: string, targets: readonly string[], concepts: readonly string[], estimatedFiles: number): GeneratorPlanOutput => ({ variant: 'ok', plan, targets, concepts, estimatedFiles } as GeneratorPlanOutput);
export const planNoTargetsConfigured = (kit: string): GeneratorPlanOutput => ({ variant: 'noTargetsConfigured', kit } as GeneratorPlanOutput);
export const planMissingProvider = (target: string): GeneratorPlanOutput => ({ variant: 'missingProvider', target } as GeneratorPlanOutput);
export const planProjectionFailed = (concept: string, reason: string): GeneratorPlanOutput => ({ variant: 'projectionFailed', concept, reason } as GeneratorPlanOutput);

export const generateOk = (plan: string, filesGenerated: number, filesUnchanged: number, duration: number): GeneratorGenerateOutput => ({ variant: 'ok', plan, filesGenerated, filesUnchanged, duration } as GeneratorGenerateOutput);
export const generatePartial = (plan: string, generated: readonly string[], failed: readonly string[]): GeneratorGenerateOutput => ({ variant: 'partial', plan, generated, failed } as GeneratorGenerateOutput);
export const generateBlocked = (plan: string, breakingChanges: readonly string[]): GeneratorGenerateOutput => ({ variant: 'blocked', plan, breakingChanges } as GeneratorGenerateOutput);

export const regenerateOk = (plan: string, filesRegenerated: number): GeneratorRegenerateOutput => ({ variant: 'ok', plan, filesRegenerated } as GeneratorRegenerateOutput);

