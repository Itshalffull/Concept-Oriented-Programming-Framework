// Relation â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for Relation
export interface RelationStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface RelationDefineRelationInput {
  readonly relation: string;
  readonly schema: string;
}

export interface RelationDefineRelationOutputOk {
  readonly variant: 'ok';
  readonly relation: string;
}

export interface RelationDefineRelationOutputExists {
  readonly variant: 'exists';
  readonly relation: string;
}

export type RelationDefineRelationOutput = RelationDefineRelationOutputOk | RelationDefineRelationOutputExists;

export interface RelationLinkInput {
  readonly relation: string;
  readonly source: string;
  readonly target: string;
}

export interface RelationLinkOutputOk {
  readonly variant: 'ok';
  readonly relation: string;
  readonly source: string;
  readonly target: string;
}

export interface RelationLinkOutputInvalid {
  readonly variant: 'invalid';
  readonly relation: string;
  readonly message: string;
}

export type RelationLinkOutput = RelationLinkOutputOk | RelationLinkOutputInvalid;

export interface RelationUnlinkInput {
  readonly relation: string;
  readonly source: string;
  readonly target: string;
}

export interface RelationUnlinkOutputOk {
  readonly variant: 'ok';
  readonly relation: string;
  readonly source: string;
  readonly target: string;
}

export interface RelationUnlinkOutputNotfound {
  readonly variant: 'notfound';
  readonly relation: string;
  readonly source: string;
  readonly target: string;
}

export type RelationUnlinkOutput = RelationUnlinkOutputOk | RelationUnlinkOutputNotfound;

export interface RelationGetRelatedInput {
  readonly relation: string;
  readonly entity: string;
}

export interface RelationGetRelatedOutputOk {
  readonly variant: 'ok';
  readonly related: string;
}

export interface RelationGetRelatedOutputNotfound {
  readonly variant: 'notfound';
  readonly relation: string;
  readonly entity: string;
}

export type RelationGetRelatedOutput = RelationGetRelatedOutputOk | RelationGetRelatedOutputNotfound;

// --- Variant constructors ---

export const defineRelationOk = (relation: string): RelationDefineRelationOutput => ({ variant: 'ok', relation } as RelationDefineRelationOutput);
export const defineRelationExists = (relation: string): RelationDefineRelationOutput => ({ variant: 'exists', relation } as RelationDefineRelationOutput);

export const linkOk = (relation: string, source: string, target: string): RelationLinkOutput => ({ variant: 'ok', relation, source, target } as RelationLinkOutput);
export const linkInvalid = (relation: string, message: string): RelationLinkOutput => ({ variant: 'invalid', relation, message } as RelationLinkOutput);

export const unlinkOk = (relation: string, source: string, target: string): RelationUnlinkOutput => ({ variant: 'ok', relation, source, target } as RelationUnlinkOutput);
export const unlinkNotfound = (relation: string, source: string, target: string): RelationUnlinkOutput => ({ variant: 'notfound', relation, source, target } as RelationUnlinkOutput);

export const getRelatedOk = (related: string): RelationGetRelatedOutput => ({ variant: 'ok', related } as RelationGetRelatedOutput);
export const getRelatedNotfound = (relation: string, entity: string): RelationGetRelatedOutput => ({ variant: 'notfound', relation, entity } as RelationGetRelatedOutput);

