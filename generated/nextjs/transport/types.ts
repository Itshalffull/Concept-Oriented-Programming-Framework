// Transport â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for Transport
export interface TransportStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface TransportConfigureInput {
  readonly transport: string;
  readonly kind: string;
  readonly baseUrl: O.Option<string>;
  readonly auth: O.Option<string>;
  readonly retryPolicy: O.Option<string>;
}

export interface TransportConfigureOutputOk {
  readonly variant: 'ok';
  readonly transport: string;
}

export interface TransportConfigureOutputInvalid {
  readonly variant: 'invalid';
  readonly message: string;
}

export type TransportConfigureOutput = TransportConfigureOutputOk | TransportConfigureOutputInvalid;

export interface TransportFetchInput {
  readonly transport: string;
  readonly query: string;
}

export interface TransportFetchOutputOk {
  readonly variant: 'ok';
  readonly transport: string;
  readonly data: string;
}

export interface TransportFetchOutputCached {
  readonly variant: 'cached';
  readonly transport: string;
  readonly data: string;
  readonly age: number;
}

export interface TransportFetchOutputError {
  readonly variant: 'error';
  readonly transport: string;
  readonly status: number;
  readonly message: string;
}

export type TransportFetchOutput = TransportFetchOutputOk | TransportFetchOutputCached | TransportFetchOutputError;

export interface TransportMutateInput {
  readonly transport: string;
  readonly action: string;
  readonly input: string;
}

export interface TransportMutateOutputOk {
  readonly variant: 'ok';
  readonly transport: string;
  readonly result: string;
}

export interface TransportMutateOutputQueued {
  readonly variant: 'queued';
  readonly transport: string;
  readonly queuePosition: number;
}

export interface TransportMutateOutputError {
  readonly variant: 'error';
  readonly transport: string;
  readonly status: number;
  readonly message: string;
}

export type TransportMutateOutput = TransportMutateOutputOk | TransportMutateOutputQueued | TransportMutateOutputError;

export interface TransportFlushQueueInput {
  readonly transport: string;
}

export interface TransportFlushQueueOutputOk {
  readonly variant: 'ok';
  readonly transport: string;
  readonly flushed: number;
}

export interface TransportFlushQueueOutputPartial {
  readonly variant: 'partial';
  readonly transport: string;
  readonly sent: number;
  readonly failed: number;
}

export type TransportFlushQueueOutput = TransportFlushQueueOutputOk | TransportFlushQueueOutputPartial;

// --- Variant constructors ---

export const configureOk = (transport: string): TransportConfigureOutput => ({ variant: 'ok', transport } as TransportConfigureOutput);
export const configureInvalid = (message: string): TransportConfigureOutput => ({ variant: 'invalid', message } as TransportConfigureOutput);

export const fetchOk = (transport: string, data: string): TransportFetchOutput => ({ variant: 'ok', transport, data } as TransportFetchOutput);
export const fetchCached = (transport: string, data: string, age: number): TransportFetchOutput => ({ variant: 'cached', transport, data, age } as TransportFetchOutput);
export const fetchError = (transport: string, status: number, message: string): TransportFetchOutput => ({ variant: 'error', transport, status, message } as TransportFetchOutput);

export const mutateOk = (transport: string, result: string): TransportMutateOutput => ({ variant: 'ok', transport, result } as TransportMutateOutput);
export const mutateQueued = (transport: string, queuePosition: number): TransportMutateOutput => ({ variant: 'queued', transport, queuePosition } as TransportMutateOutput);
export const mutateError = (transport: string, status: number, message: string): TransportMutateOutput => ({ variant: 'error', transport, status, message } as TransportMutateOutput);

export const flushQueueOk = (transport: string, flushed: number): TransportFlushQueueOutput => ({ variant: 'ok', transport, flushed } as TransportFlushQueueOutput);
export const flushQueuePartial = (transport: string, sent: number, failed: number): TransportFlushQueueOutput => ({ variant: 'partial', transport, sent, failed } as TransportFlushQueueOutput);

