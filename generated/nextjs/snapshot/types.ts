// Snapshot â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for Snapshot
export interface SnapshotStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface SnapshotCompareInput {
  readonly outputPath: string;
  readonly currentContent: string;
}

export interface SnapshotCompareOutputUnchanged {
  readonly variant: 'unchanged';
  readonly snapshot: string;
}

export interface SnapshotCompareOutputChanged {
  readonly variant: 'changed';
  readonly snapshot: string;
  readonly diff: string;
  readonly linesAdded: number;
  readonly linesRemoved: number;
}

export interface SnapshotCompareOutputNew {
  readonly variant: 'new';
  readonly path: string;
  readonly contentHash: string;
}

export type SnapshotCompareOutput = SnapshotCompareOutputUnchanged | SnapshotCompareOutputChanged | SnapshotCompareOutputNew;

export interface SnapshotApproveInput {
  readonly path: string;
  readonly approver: O.Option<string>;
}

export interface SnapshotApproveOutputOk {
  readonly variant: 'ok';
  readonly snapshot: string;
}

export interface SnapshotApproveOutputNoChange {
  readonly variant: 'noChange';
  readonly snapshot: string;
}

export type SnapshotApproveOutput = SnapshotApproveOutputOk | SnapshotApproveOutputNoChange;

export interface SnapshotApproveAllInput {
  readonly paths: O.Option<readonly string[]>;
}

export interface SnapshotApproveAllOutput {
  readonly variant: 'ok';
  readonly approved: number;
}

export interface SnapshotRejectInput {
  readonly path: string;
}

export interface SnapshotRejectOutputOk {
  readonly variant: 'ok';
  readonly snapshot: string;
}

export interface SnapshotRejectOutputNoChange {
  readonly variant: 'noChange';
  readonly snapshot: string;
}

export type SnapshotRejectOutput = SnapshotRejectOutputOk | SnapshotRejectOutputNoChange;

export interface SnapshotStatusInput {
  readonly paths: O.Option<readonly string[]>;
}

export interface SnapshotStatusOutput {
  readonly variant: 'ok';
  readonly results: readonly { readonly path: string; readonly status: string; readonly linesChanged: O.Option<number>; readonly approvedAt: O.Option<Date> }[];
}

export interface SnapshotDiffInput {
  readonly path: string;
}

export interface SnapshotDiffOutputOk {
  readonly variant: 'ok';
  readonly diff: string;
  readonly linesAdded: number;
  readonly linesRemoved: number;
}

export interface SnapshotDiffOutputNoBaseline {
  readonly variant: 'noBaseline';
  readonly path: string;
}

export interface SnapshotDiffOutputUnchanged {
  readonly variant: 'unchanged';
  readonly path: string;
}

export type SnapshotDiffOutput = SnapshotDiffOutputOk | SnapshotDiffOutputNoBaseline | SnapshotDiffOutputUnchanged;

export interface SnapshotCleanInput {
  readonly outputDir: string;
}

export interface SnapshotCleanOutput {
  readonly variant: 'ok';
  readonly removed: readonly string[];
}

// --- Variant constructors ---

export const compareUnchanged = (snapshot: string): SnapshotCompareOutput => ({ variant: 'unchanged', snapshot } as SnapshotCompareOutput);
export const compareChanged = (snapshot: string, diff: string, linesAdded: number, linesRemoved: number): SnapshotCompareOutput => ({ variant: 'changed', snapshot, diff, linesAdded, linesRemoved } as SnapshotCompareOutput);
export const compareNew = (path: string, contentHash: string): SnapshotCompareOutput => ({ variant: 'new', path, contentHash } as SnapshotCompareOutput);

export const approveOk = (snapshot: string): SnapshotApproveOutput => ({ variant: 'ok', snapshot } as SnapshotApproveOutput);
export const approveNoChange = (snapshot: string): SnapshotApproveOutput => ({ variant: 'noChange', snapshot } as SnapshotApproveOutput);

export const approveAllOk = (approved: number): SnapshotApproveAllOutput => ({ variant: 'ok', approved } as SnapshotApproveAllOutput);

export const rejectOk = (snapshot: string): SnapshotRejectOutput => ({ variant: 'ok', snapshot } as SnapshotRejectOutput);
export const rejectNoChange = (snapshot: string): SnapshotRejectOutput => ({ variant: 'noChange', snapshot } as SnapshotRejectOutput);

export const statusOk = (results: readonly { readonly path: string; readonly status: string; readonly linesChanged: O.Option<number>; readonly approvedAt: O.Option<Date> }[]): SnapshotStatusOutput => ({ variant: 'ok', results } as SnapshotStatusOutput);

export const diffOk = (diff: string, linesAdded: number, linesRemoved: number): SnapshotDiffOutput => ({ variant: 'ok', diff, linesAdded, linesRemoved } as SnapshotDiffOutput);
export const diffNoBaseline = (path: string): SnapshotDiffOutput => ({ variant: 'noBaseline', path } as SnapshotDiffOutput);
export const diffUnchanged = (path: string): SnapshotDiffOutput => ({ variant: 'unchanged', path } as SnapshotDiffOutput);

export const cleanOk = (removed: readonly string[]): SnapshotCleanOutput => ({ variant: 'ok', removed } as SnapshotCleanOutput);

