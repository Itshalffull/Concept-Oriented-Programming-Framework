// TypeScriptBuilder â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for TypeScriptBuilder
export interface TypeScriptBuilderStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface TypeScriptBuilderBuildInput {
  readonly source: string;
  readonly toolchainPath: string;
  readonly platform: string;
  readonly config: { readonly mode: string; readonly features: O.Option<readonly string[]> };
}

export interface TypeScriptBuilderBuildOutputOk {
  readonly variant: 'ok';
  readonly build: string;
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface TypeScriptBuilderBuildOutputTypeError {
  readonly variant: 'typeError';
  readonly errors: readonly { readonly file: string; readonly line: number; readonly message: string }[];
}

export interface TypeScriptBuilderBuildOutputBundleError {
  readonly variant: 'bundleError';
  readonly reason: string;
}

export type TypeScriptBuilderBuildOutput = TypeScriptBuilderBuildOutputOk | TypeScriptBuilderBuildOutputTypeError | TypeScriptBuilderBuildOutputBundleError;

export interface TypeScriptBuilderTestInput {
  readonly build: string;
  readonly toolchainPath: string;
  readonly invocation: O.Option<{ readonly command: string; readonly args: readonly string[]; readonly outputFormat: string; readonly configFile: O.Option<string>; readonly env: O.Option<string> }>;
  readonly testType: O.Option<string>;
}

export interface TypeScriptBuilderTestOutputOk {
  readonly variant: 'ok';
  readonly passed: number;
  readonly failed: number;
  readonly skipped: number;
  readonly duration: number;
  readonly testType: string;
}

export interface TypeScriptBuilderTestOutputTestFailure {
  readonly variant: 'testFailure';
  readonly passed: number;
  readonly failed: number;
  readonly failures: readonly { readonly test: string; readonly message: string }[];
  readonly testType: string;
}

export type TypeScriptBuilderTestOutput = TypeScriptBuilderTestOutputOk | TypeScriptBuilderTestOutputTestFailure;

export interface TypeScriptBuilderPackageInput {
  readonly build: string;
  readonly format: string;
}

export interface TypeScriptBuilderPackageOutputOk {
  readonly variant: 'ok';
  readonly artifactPath: string;
  readonly artifactHash: string;
}

export interface TypeScriptBuilderPackageOutputFormatUnsupported {
  readonly variant: 'formatUnsupported';
  readonly format: string;
}

export type TypeScriptBuilderPackageOutput = TypeScriptBuilderPackageOutputOk | TypeScriptBuilderPackageOutputFormatUnsupported;

export interface TypeScriptBuilderRegisterInput {
}

export interface TypeScriptBuilderRegisterOutput {
  readonly variant: 'ok';
  readonly name: string;
  readonly language: string;
  readonly capabilities: readonly string[];
}

// --- Variant constructors ---

export const buildOk = (build: string, artifactPath: string, artifactHash: string): TypeScriptBuilderBuildOutput => ({ variant: 'ok', build, artifactPath, artifactHash } as TypeScriptBuilderBuildOutput);
export const buildTypeError = (errors: readonly { readonly file: string; readonly line: number; readonly message: string }[]): TypeScriptBuilderBuildOutput => ({ variant: 'typeError', errors } as TypeScriptBuilderBuildOutput);
export const buildBundleError = (reason: string): TypeScriptBuilderBuildOutput => ({ variant: 'bundleError', reason } as TypeScriptBuilderBuildOutput);

export const testOk = (passed: number, failed: number, skipped: number, duration: number, testType: string): TypeScriptBuilderTestOutput => ({ variant: 'ok', passed, failed, skipped, duration, testType } as TypeScriptBuilderTestOutput);
export const testTestFailure = (passed: number, failed: number, failures: readonly { readonly test: string; readonly message: string }[], testType: string): TypeScriptBuilderTestOutput => ({ variant: 'testFailure', passed, failed, failures, testType } as TypeScriptBuilderTestOutput);

export const packageOk = (artifactPath: string, artifactHash: string): TypeScriptBuilderPackageOutput => ({ variant: 'ok', artifactPath, artifactHash } as TypeScriptBuilderPackageOutput);
export const packageFormatUnsupported = (format: string): TypeScriptBuilderPackageOutput => ({ variant: 'formatUnsupported', format } as TypeScriptBuilderPackageOutput);

export const registerOk = (name: string, language: string, capabilities: readonly string[]): TypeScriptBuilderRegisterOutput => ({ variant: 'ok', name, language, capabilities } as TypeScriptBuilderRegisterOutput);

