// Rollout â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for Rollout
export interface RolloutStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface RolloutBeginInput {
  readonly plan: string;
  readonly strategy: string;
  readonly steps: readonly string[];
}

export interface RolloutBeginOutputOk {
  readonly variant: 'ok';
  readonly rollout: string;
}

export interface RolloutBeginOutputInvalidStrategy {
  readonly variant: 'invalidStrategy';
  readonly message: string;
}

export type RolloutBeginOutput = RolloutBeginOutputOk | RolloutBeginOutputInvalidStrategy;

export interface RolloutAdvanceInput {
  readonly rollout: string;
}

export interface RolloutAdvanceOutputOk {
  readonly variant: 'ok';
  readonly rollout: string;
  readonly newWeight: number;
  readonly step: number;
}

export interface RolloutAdvanceOutputComplete {
  readonly variant: 'complete';
  readonly rollout: string;
}

export interface RolloutAdvanceOutputPaused {
  readonly variant: 'paused';
  readonly rollout: string;
  readonly reason: string;
}

export type RolloutAdvanceOutput = RolloutAdvanceOutputOk | RolloutAdvanceOutputComplete | RolloutAdvanceOutputPaused;

export interface RolloutPauseInput {
  readonly rollout: string;
  readonly reason: string;
}

export interface RolloutPauseOutput {
  readonly variant: 'ok';
  readonly rollout: string;
}

export interface RolloutResumeInput {
  readonly rollout: string;
}

export interface RolloutResumeOutput {
  readonly variant: 'ok';
  readonly rollout: string;
  readonly currentWeight: number;
}

export interface RolloutAbortInput {
  readonly rollout: string;
}

export interface RolloutAbortOutputOk {
  readonly variant: 'ok';
  readonly rollout: string;
}

export interface RolloutAbortOutputAlreadyComplete {
  readonly variant: 'alreadyComplete';
  readonly rollout: string;
}

export type RolloutAbortOutput = RolloutAbortOutputOk | RolloutAbortOutputAlreadyComplete;

export interface RolloutStatusInput {
  readonly rollout: string;
}

export interface RolloutStatusOutput {
  readonly variant: 'ok';
  readonly rollout: string;
  readonly step: number;
  readonly weight: number;
  readonly status: string;
  readonly elapsed: number;
}

// --- Variant constructors ---

export const beginOk = (rollout: string): RolloutBeginOutput => ({ variant: 'ok', rollout } as RolloutBeginOutput);
export const beginInvalidStrategy = (message: string): RolloutBeginOutput => ({ variant: 'invalidStrategy', message } as RolloutBeginOutput);

export const advanceOk = (rollout: string, newWeight: number, step: number): RolloutAdvanceOutput => ({ variant: 'ok', rollout, newWeight, step } as RolloutAdvanceOutput);
export const advanceComplete = (rollout: string): RolloutAdvanceOutput => ({ variant: 'complete', rollout } as RolloutAdvanceOutput);
export const advancePaused = (rollout: string, reason: string): RolloutAdvanceOutput => ({ variant: 'paused', rollout, reason } as RolloutAdvanceOutput);

export const pauseOk = (rollout: string): RolloutPauseOutput => ({ variant: 'ok', rollout } as RolloutPauseOutput);

export const resumeOk = (rollout: string, currentWeight: number): RolloutResumeOutput => ({ variant: 'ok', rollout, currentWeight } as RolloutResumeOutput);

export const abortOk = (rollout: string): RolloutAbortOutput => ({ variant: 'ok', rollout } as RolloutAbortOutput);
export const abortAlreadyComplete = (rollout: string): RolloutAbortOutput => ({ variant: 'alreadyComplete', rollout } as RolloutAbortOutput);

export const statusOk = (rollout: string, step: number, weight: number, status: string, elapsed: number): RolloutStatusOutput => ({ variant: 'ok', rollout, step, weight, status, elapsed } as RolloutStatusOutput);

