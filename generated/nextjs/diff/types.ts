// Diff â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for Diff
export interface DiffStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface DiffRegisterProviderInput {
  readonly name: string;
  readonly contentTypes: readonly string[];
}

export interface DiffRegisterProviderOutputOk {
  readonly variant: 'ok';
  readonly provider: unknown;
}

export interface DiffRegisterProviderOutputDuplicate {
  readonly variant: 'duplicate';
  readonly message: string;
}

export type DiffRegisterProviderOutput = DiffRegisterProviderOutputOk | DiffRegisterProviderOutputDuplicate;

export interface DiffDiffInput {
  readonly contentA: string;
  readonly contentB: string;
  readonly algorithm: O.Option<string>;
}

export interface DiffDiffOutputIdentical {
  readonly variant: 'identical';
}

export interface DiffDiffOutputDiffed {
  readonly variant: 'diffed';
  readonly editScript: Buffer;
  readonly distance: number;
}

export interface DiffDiffOutputNoProvider {
  readonly variant: 'noProvider';
  readonly message: string;
}

export type DiffDiffOutput = DiffDiffOutputIdentical | DiffDiffOutputDiffed | DiffDiffOutputNoProvider;

export interface DiffPatchInput {
  readonly content: string;
  readonly editScript: Buffer;
}

export interface DiffPatchOutputOk {
  readonly variant: 'ok';
  readonly result: string;
}

export interface DiffPatchOutputIncompatible {
  readonly variant: 'incompatible';
  readonly message: string;
}

export type DiffPatchOutput = DiffPatchOutputOk | DiffPatchOutputIncompatible;

// --- Variant constructors ---

export const registerProviderOk = (provider: unknown): DiffRegisterProviderOutput => ({ variant: 'ok', provider } as DiffRegisterProviderOutput);
export const registerProviderDuplicate = (message: string): DiffRegisterProviderOutput => ({ variant: 'duplicate', message } as DiffRegisterProviderOutput);

export const diffIdentical = (): DiffDiffOutput => ({ variant: 'identical' } as DiffDiffOutput);
export const diffDiffed = (editScript: Buffer, distance: number): DiffDiffOutput => ({ variant: 'diffed', editScript, distance } as DiffDiffOutput);
export const diffNoProvider = (message: string): DiffDiffOutput => ({ variant: 'noProvider', message } as DiffDiffOutput);

export const patchOk = (result: string): DiffPatchOutput => ({ variant: 'ok', result } as DiffPatchOutput);
export const patchIncompatible = (message: string): DiffPatchOutput => ({ variant: 'incompatible', message } as DiffPatchOutput);

