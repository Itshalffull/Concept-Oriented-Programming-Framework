// Env â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for Env
export interface EnvStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface EnvResolveInput {
  readonly environment: string;
}

export interface EnvResolveOutputOk {
  readonly variant: 'ok';
  readonly environment: string;
  readonly resolved: string;
}

export interface EnvResolveOutputMissingBase {
  readonly variant: 'missingBase';
  readonly environment: string;
}

export interface EnvResolveOutputConflictingOverrides {
  readonly variant: 'conflictingOverrides';
  readonly environment: string;
  readonly conflicts: readonly string[];
}

export type EnvResolveOutput = EnvResolveOutputOk | EnvResolveOutputMissingBase | EnvResolveOutputConflictingOverrides;

export interface EnvPromoteInput {
  readonly fromEnv: string;
  readonly toEnv: string;
  readonly kitName: string;
}

export interface EnvPromoteOutputOk {
  readonly variant: 'ok';
  readonly toEnv: string;
  readonly version: string;
}

export interface EnvPromoteOutputNotValidated {
  readonly variant: 'notValidated';
  readonly fromEnv: string;
  readonly kitName: string;
}

export interface EnvPromoteOutputVersionMismatch {
  readonly variant: 'versionMismatch';
  readonly fromEnv: string;
  readonly toEnv: string;
  readonly details: string;
}

export type EnvPromoteOutput = EnvPromoteOutputOk | EnvPromoteOutputNotValidated | EnvPromoteOutputVersionMismatch;

export interface EnvDiffInput {
  readonly envA: string;
  readonly envB: string;
}

export interface EnvDiffOutput {
  readonly variant: 'ok';
  readonly differences: readonly string[];
}

// --- Variant constructors ---

export const resolveOk = (environment: string, resolved: string): EnvResolveOutput => ({ variant: 'ok', environment, resolved } as EnvResolveOutput);
export const resolveMissingBase = (environment: string): EnvResolveOutput => ({ variant: 'missingBase', environment } as EnvResolveOutput);
export const resolveConflictingOverrides = (environment: string, conflicts: readonly string[]): EnvResolveOutput => ({ variant: 'conflictingOverrides', environment, conflicts } as EnvResolveOutput);

export const promoteOk = (toEnv: string, version: string): EnvPromoteOutput => ({ variant: 'ok', toEnv, version } as EnvPromoteOutput);
export const promoteNotValidated = (fromEnv: string, kitName: string): EnvPromoteOutput => ({ variant: 'notValidated', fromEnv, kitName } as EnvPromoteOutput);
export const promoteVersionMismatch = (fromEnv: string, toEnv: string, details: string): EnvPromoteOutput => ({ variant: 'versionMismatch', fromEnv, toEnv, details } as EnvPromoteOutput);

export const diffOk = (differences: readonly string[]): EnvDiffOutput => ({ variant: 'ok', differences } as EnvDiffOutput);

