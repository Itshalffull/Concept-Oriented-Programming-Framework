// KindSystem â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for KindSystem
export interface KindSystemStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface KindSystemDefineInput {
  readonly name: string;
  readonly category: string;
}

export interface KindSystemDefineOutputOk {
  readonly variant: 'ok';
  readonly kind: string;
}

export interface KindSystemDefineOutputExists {
  readonly variant: 'exists';
  readonly kind: string;
}

export type KindSystemDefineOutput = KindSystemDefineOutputOk | KindSystemDefineOutputExists;

export interface KindSystemConnectInput {
  readonly from: string;
  readonly to: string;
  readonly relation: string;
  readonly transformName: O.Option<string>;
}

export interface KindSystemConnectOutputOk {
  readonly variant: 'ok';
}

export interface KindSystemConnectOutputInvalid {
  readonly variant: 'invalid';
  readonly message: string;
}

export type KindSystemConnectOutput = KindSystemConnectOutputOk | KindSystemConnectOutputInvalid;

export interface KindSystemRouteInput {
  readonly from: string;
  readonly to: string;
}

export interface KindSystemRouteOutputOk {
  readonly variant: 'ok';
  readonly path: readonly { readonly kind: string; readonly relation: string; readonly transform: O.Option<string> }[];
}

export interface KindSystemRouteOutputUnreachable {
  readonly variant: 'unreachable';
  readonly message: string;
}

export type KindSystemRouteOutput = KindSystemRouteOutputOk | KindSystemRouteOutputUnreachable;

export interface KindSystemValidateInput {
  readonly from: string;
  readonly to: string;
}

export interface KindSystemValidateOutputOk {
  readonly variant: 'ok';
}

export interface KindSystemValidateOutputInvalid {
  readonly variant: 'invalid';
  readonly message: string;
}

export type KindSystemValidateOutput = KindSystemValidateOutputOk | KindSystemValidateOutputInvalid;

export interface KindSystemDependentsInput {
  readonly kind: string;
}

export interface KindSystemDependentsOutput {
  readonly variant: 'ok';
  readonly downstream: readonly string[];
}

export interface KindSystemProducersInput {
  readonly kind: string;
}

export interface KindSystemProducersOutput {
  readonly variant: 'ok';
  readonly transforms: readonly { readonly fromKind: string; readonly transformName: O.Option<string> }[];
}

export interface KindSystemConsumersInput {
  readonly kind: string;
}

export interface KindSystemConsumersOutput {
  readonly variant: 'ok';
  readonly transforms: readonly { readonly toKind: string; readonly transformName: O.Option<string> }[];
}

export interface KindSystemGraphInput {
}

export interface KindSystemGraphOutput {
  readonly variant: 'ok';
  readonly kinds: readonly { readonly name: string; readonly category: string }[];
  readonly edges: readonly { readonly from: string; readonly to: string; readonly relation: string; readonly transform: O.Option<string> }[];
}

// --- Variant constructors ---

export const defineOk = (kind: string): KindSystemDefineOutput => ({ variant: 'ok', kind } as KindSystemDefineOutput);
export const defineExists = (kind: string): KindSystemDefineOutput => ({ variant: 'exists', kind } as KindSystemDefineOutput);

export const connectOk = (): KindSystemConnectOutput => ({ variant: 'ok' } as KindSystemConnectOutput);
export const connectInvalid = (message: string): KindSystemConnectOutput => ({ variant: 'invalid', message } as KindSystemConnectOutput);

export const routeOk = (path: readonly { readonly kind: string; readonly relation: string; readonly transform: O.Option<string> }[]): KindSystemRouteOutput => ({ variant: 'ok', path } as KindSystemRouteOutput);
export const routeUnreachable = (message: string): KindSystemRouteOutput => ({ variant: 'unreachable', message } as KindSystemRouteOutput);

export const validateOk = (): KindSystemValidateOutput => ({ variant: 'ok' } as KindSystemValidateOutput);
export const validateInvalid = (message: string): KindSystemValidateOutput => ({ variant: 'invalid', message } as KindSystemValidateOutput);

export const dependentsOk = (downstream: readonly string[]): KindSystemDependentsOutput => ({ variant: 'ok', downstream } as KindSystemDependentsOutput);

export const producersOk = (transforms: readonly { readonly fromKind: string; readonly transformName: O.Option<string> }[]): KindSystemProducersOutput => ({ variant: 'ok', transforms } as KindSystemProducersOutput);

export const consumersOk = (transforms: readonly { readonly toKind: string; readonly transformName: O.Option<string> }[]): KindSystemConsumersOutput => ({ variant: 'ok', transforms } as KindSystemConsumersOutput);

export const graphOk = (kinds: readonly { readonly name: string; readonly category: string }[], edges: readonly { readonly from: string; readonly to: string; readonly relation: string; readonly transform: O.Option<string> }[]): KindSystemGraphOutput => ({ variant: 'ok', kinds, edges } as KindSystemGraphOutput);

