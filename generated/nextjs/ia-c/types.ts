// IaC â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for IaC
export interface IaCStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface IaCEmitInput {
  readonly plan: string;
  readonly provider: string;
}

export interface IaCEmitOutputOk {
  readonly variant: 'ok';
  readonly output: string;
  readonly fileCount: number;
}

export interface IaCEmitOutputUnsupportedResource {
  readonly variant: 'unsupportedResource';
  readonly resource: string;
  readonly provider: string;
}

export type IaCEmitOutput = IaCEmitOutputOk | IaCEmitOutputUnsupportedResource;

export interface IaCPreviewInput {
  readonly plan: string;
  readonly provider: string;
}

export interface IaCPreviewOutputOk {
  readonly variant: 'ok';
  readonly toCreate: readonly string[];
  readonly toUpdate: readonly string[];
  readonly toDelete: readonly string[];
  readonly estimatedMonthlyCost: number;
}

export interface IaCPreviewOutputStateCorrupted {
  readonly variant: 'stateCorrupted';
  readonly provider: string;
  readonly reason: string;
}

export type IaCPreviewOutput = IaCPreviewOutputOk | IaCPreviewOutputStateCorrupted;

export interface IaCApplyInput {
  readonly plan: string;
  readonly provider: string;
}

export interface IaCApplyOutputOk {
  readonly variant: 'ok';
  readonly created: readonly string[];
  readonly updated: readonly string[];
  readonly deleted: readonly string[];
}

export interface IaCApplyOutputPartial {
  readonly variant: 'partial';
  readonly created: readonly string[];
  readonly failed: readonly string[];
  readonly reason: string;
}

export interface IaCApplyOutputApplyFailed {
  readonly variant: 'applyFailed';
  readonly reason: string;
}

export type IaCApplyOutput = IaCApplyOutputOk | IaCApplyOutputPartial | IaCApplyOutputApplyFailed;

export interface IaCDetectDriftInput {
  readonly provider: string;
}

export interface IaCDetectDriftOutputOk {
  readonly variant: 'ok';
  readonly drifted: readonly string[];
  readonly clean: readonly string[];
}

export interface IaCDetectDriftOutputNoDrift {
  readonly variant: 'noDrift';
}

export type IaCDetectDriftOutput = IaCDetectDriftOutputOk | IaCDetectDriftOutputNoDrift;

export interface IaCTeardownInput {
  readonly plan: string;
  readonly provider: string;
}

export interface IaCTeardownOutputOk {
  readonly variant: 'ok';
  readonly destroyed: readonly string[];
}

export interface IaCTeardownOutputPartial {
  readonly variant: 'partial';
  readonly destroyed: readonly string[];
  readonly stuck: readonly string[];
}

export type IaCTeardownOutput = IaCTeardownOutputOk | IaCTeardownOutputPartial;

// --- Variant constructors ---

export const emitOk = (output: string, fileCount: number): IaCEmitOutput => ({ variant: 'ok', output, fileCount } as IaCEmitOutput);
export const emitUnsupportedResource = (resource: string, provider: string): IaCEmitOutput => ({ variant: 'unsupportedResource', resource, provider } as IaCEmitOutput);

export const previewOk = (toCreate: readonly string[], toUpdate: readonly string[], toDelete: readonly string[], estimatedMonthlyCost: number): IaCPreviewOutput => ({ variant: 'ok', toCreate, toUpdate, toDelete, estimatedMonthlyCost } as IaCPreviewOutput);
export const previewStateCorrupted = (provider: string, reason: string): IaCPreviewOutput => ({ variant: 'stateCorrupted', provider, reason } as IaCPreviewOutput);

export const applyOk = (created: readonly string[], updated: readonly string[], deleted: readonly string[]): IaCApplyOutput => ({ variant: 'ok', created, updated, deleted } as IaCApplyOutput);
export const applyPartial = (created: readonly string[], failed: readonly string[], reason: string): IaCApplyOutput => ({ variant: 'partial', created, failed, reason } as IaCApplyOutput);
export const applyApplyFailed = (reason: string): IaCApplyOutput => ({ variant: 'applyFailed', reason } as IaCApplyOutput);

export const detectDriftOk = (drifted: readonly string[], clean: readonly string[]): IaCDetectDriftOutput => ({ variant: 'ok', drifted, clean } as IaCDetectDriftOutput);
export const detectDriftNoDrift = (): IaCDetectDriftOutput => ({ variant: 'noDrift' } as IaCDetectDriftOutput);

export const teardownOk = (destroyed: readonly string[]): IaCTeardownOutput => ({ variant: 'ok', destroyed } as IaCTeardownOutput);
export const teardownPartial = (destroyed: readonly string[], stuck: readonly string[]): IaCTeardownOutput => ({ variant: 'partial', destroyed, stuck } as IaCTeardownOutput);

