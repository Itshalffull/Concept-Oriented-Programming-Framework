// DeployPlan â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for DeployPlan
export interface DeployPlanStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface DeployPlanPlanInput {
  readonly manifest: string;
  readonly environment: string;
}

export interface DeployPlanPlanOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly graph: string;
  readonly estimatedDuration: number;
}

export interface DeployPlanPlanOutputInvalidManifest {
  readonly variant: 'invalidManifest';
  readonly errors: readonly string[];
}

export interface DeployPlanPlanOutputIncompleteGraph {
  readonly variant: 'incompleteGraph';
  readonly missing: readonly string[];
}

export interface DeployPlanPlanOutputCircularDependency {
  readonly variant: 'circularDependency';
  readonly cycle: readonly string[];
}

export interface DeployPlanPlanOutputTransportMismatch {
  readonly variant: 'transportMismatch';
  readonly details: readonly string[];
}

export type DeployPlanPlanOutput = DeployPlanPlanOutputOk | DeployPlanPlanOutputInvalidManifest | DeployPlanPlanOutputIncompleteGraph | DeployPlanPlanOutputCircularDependency | DeployPlanPlanOutputTransportMismatch;

export interface DeployPlanValidateInput {
  readonly plan: string;
}

export interface DeployPlanValidateOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly warnings: readonly string[];
}

export interface DeployPlanValidateOutputMigrationRequired {
  readonly variant: 'migrationRequired';
  readonly plan: string;
  readonly concepts: readonly string[];
  readonly fromVersions: readonly number[];
  readonly toVersions: readonly number[];
}

export interface DeployPlanValidateOutputSchemaIncompatible {
  readonly variant: 'schemaIncompatible';
  readonly details: readonly string[];
}

export type DeployPlanValidateOutput = DeployPlanValidateOutputOk | DeployPlanValidateOutputMigrationRequired | DeployPlanValidateOutputSchemaIncompatible;

export interface DeployPlanExecuteInput {
  readonly plan: string;
}

export interface DeployPlanExecuteOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly duration: number;
  readonly nodesDeployed: number;
}

export interface DeployPlanExecuteOutputPartial {
  readonly variant: 'partial';
  readonly plan: string;
  readonly deployed: readonly string[];
  readonly failed: readonly string[];
}

export interface DeployPlanExecuteOutputRollbackTriggered {
  readonly variant: 'rollbackTriggered';
  readonly plan: string;
  readonly reason: string;
  readonly rolledBack: readonly string[];
}

export interface DeployPlanExecuteOutputRollbackFailed {
  readonly variant: 'rollbackFailed';
  readonly plan: string;
  readonly reason: string;
  readonly stuck: readonly string[];
}

export type DeployPlanExecuteOutput = DeployPlanExecuteOutputOk | DeployPlanExecuteOutputPartial | DeployPlanExecuteOutputRollbackTriggered | DeployPlanExecuteOutputRollbackFailed;

export interface DeployPlanRollbackInput {
  readonly plan: string;
}

export interface DeployPlanRollbackOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly rolledBack: readonly string[];
}

export interface DeployPlanRollbackOutputPartial {
  readonly variant: 'partial';
  readonly plan: string;
  readonly rolledBack: readonly string[];
  readonly stuck: readonly string[];
}

export type DeployPlanRollbackOutput = DeployPlanRollbackOutputOk | DeployPlanRollbackOutputPartial;

export interface DeployPlanStatusInput {
  readonly plan: string;
}

export interface DeployPlanStatusOutputOk {
  readonly variant: 'ok';
  readonly plan: string;
  readonly phase: string;
  readonly progress: number;
  readonly activeNodes: readonly string[];
}

export interface DeployPlanStatusOutputNotfound {
  readonly variant: 'notfound';
  readonly plan: string;
}

export type DeployPlanStatusOutput = DeployPlanStatusOutputOk | DeployPlanStatusOutputNotfound;

// --- Variant constructors ---

export const planOk = (plan: string, graph: string, estimatedDuration: number): DeployPlanPlanOutput => ({ variant: 'ok', plan, graph, estimatedDuration } as DeployPlanPlanOutput);
export const planInvalidManifest = (errors: readonly string[]): DeployPlanPlanOutput => ({ variant: 'invalidManifest', errors } as DeployPlanPlanOutput);
export const planIncompleteGraph = (missing: readonly string[]): DeployPlanPlanOutput => ({ variant: 'incompleteGraph', missing } as DeployPlanPlanOutput);
export const planCircularDependency = (cycle: readonly string[]): DeployPlanPlanOutput => ({ variant: 'circularDependency', cycle } as DeployPlanPlanOutput);
export const planTransportMismatch = (details: readonly string[]): DeployPlanPlanOutput => ({ variant: 'transportMismatch', details } as DeployPlanPlanOutput);

export const validateOk = (plan: string, warnings: readonly string[]): DeployPlanValidateOutput => ({ variant: 'ok', plan, warnings } as DeployPlanValidateOutput);
export const validateMigrationRequired = (plan: string, concepts: readonly string[], fromVersions: readonly number[], toVersions: readonly number[]): DeployPlanValidateOutput => ({ variant: 'migrationRequired', plan, concepts, fromVersions, toVersions } as DeployPlanValidateOutput);
export const validateSchemaIncompatible = (details: readonly string[]): DeployPlanValidateOutput => ({ variant: 'schemaIncompatible', details } as DeployPlanValidateOutput);

export const executeOk = (plan: string, duration: number, nodesDeployed: number): DeployPlanExecuteOutput => ({ variant: 'ok', plan, duration, nodesDeployed } as DeployPlanExecuteOutput);
export const executePartial = (plan: string, deployed: readonly string[], failed: readonly string[]): DeployPlanExecuteOutput => ({ variant: 'partial', plan, deployed, failed } as DeployPlanExecuteOutput);
export const executeRollbackTriggered = (plan: string, reason: string, rolledBack: readonly string[]): DeployPlanExecuteOutput => ({ variant: 'rollbackTriggered', plan, reason, rolledBack } as DeployPlanExecuteOutput);
export const executeRollbackFailed = (plan: string, reason: string, stuck: readonly string[]): DeployPlanExecuteOutput => ({ variant: 'rollbackFailed', plan, reason, stuck } as DeployPlanExecuteOutput);

export const rollbackOk = (plan: string, rolledBack: readonly string[]): DeployPlanRollbackOutput => ({ variant: 'ok', plan, rolledBack } as DeployPlanRollbackOutput);
export const rollbackPartial = (plan: string, rolledBack: readonly string[], stuck: readonly string[]): DeployPlanRollbackOutput => ({ variant: 'partial', plan, rolledBack, stuck } as DeployPlanRollbackOutput);

export const statusOk = (plan: string, phase: string, progress: number, activeNodes: readonly string[]): DeployPlanStatusOutput => ({ variant: 'ok', plan, phase, progress, activeNodes } as DeployPlanStatusOutput);
export const statusNotfound = (plan: string): DeployPlanStatusOutput => ({ variant: 'notfound', plan } as DeployPlanStatusOutput);

