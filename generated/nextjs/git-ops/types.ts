// GitOps â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for GitOps
export interface GitOpsStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface GitOpsEmitInput {
  readonly plan: string;
  readonly controller: string;
  readonly repo: string;
  readonly path: string;
}

export interface GitOpsEmitOutputOk {
  readonly variant: 'ok';
  readonly manifest: string;
  readonly files: readonly string[];
}

export interface GitOpsEmitOutputControllerUnsupported {
  readonly variant: 'controllerUnsupported';
  readonly controller: string;
}

export type GitOpsEmitOutput = GitOpsEmitOutputOk | GitOpsEmitOutputControllerUnsupported;

export interface GitOpsReconciliationStatusInput {
  readonly manifest: string;
}

export interface GitOpsReconciliationStatusOutputOk {
  readonly variant: 'ok';
  readonly manifest: string;
  readonly status: string;
  readonly reconciledAt: Date;
}

export interface GitOpsReconciliationStatusOutputPending {
  readonly variant: 'pending';
  readonly manifest: string;
  readonly waitingOn: readonly string[];
}

export interface GitOpsReconciliationStatusOutputFailed {
  readonly variant: 'failed';
  readonly manifest: string;
  readonly reason: string;
}

export type GitOpsReconciliationStatusOutput = GitOpsReconciliationStatusOutputOk | GitOpsReconciliationStatusOutputPending | GitOpsReconciliationStatusOutputFailed;

// --- Variant constructors ---

export const emitOk = (manifest: string, files: readonly string[]): GitOpsEmitOutput => ({ variant: 'ok', manifest, files } as GitOpsEmitOutput);
export const emitControllerUnsupported = (controller: string): GitOpsEmitOutput => ({ variant: 'controllerUnsupported', controller } as GitOpsEmitOutput);

export const reconciliationStatusOk = (manifest: string, status: string, reconciledAt: Date): GitOpsReconciliationStatusOutput => ({ variant: 'ok', manifest, status, reconciledAt } as GitOpsReconciliationStatusOutput);
export const reconciliationStatusPending = (manifest: string, waitingOn: readonly string[]): GitOpsReconciliationStatusOutput => ({ variant: 'pending', manifest, waitingOn } as GitOpsReconciliationStatusOutput);
export const reconciliationStatusFailed = (manifest: string, reason: string): GitOpsReconciliationStatusOutput => ({ variant: 'failed', manifest, reason } as GitOpsReconciliationStatusOutput);

