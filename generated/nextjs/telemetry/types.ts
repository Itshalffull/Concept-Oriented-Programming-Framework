// Telemetry â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for Telemetry
export interface TelemetryStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface TelemetryConfigureInput {
  readonly concept: string;
  readonly endpoint: string;
  readonly samplingRate: number;
}

export interface TelemetryConfigureOutput {
  readonly variant: 'ok';
  readonly config: string;
}

export interface TelemetryDeployMarkerInput {
  readonly kit: string;
  readonly version: string;
  readonly environment: string;
  readonly status: string;
}

export interface TelemetryDeployMarkerOutputOk {
  readonly variant: 'ok';
  readonly marker: string;
}

export interface TelemetryDeployMarkerOutputBackendUnavailable {
  readonly variant: 'backendUnavailable';
  readonly endpoint: string;
}

export type TelemetryDeployMarkerOutput = TelemetryDeployMarkerOutputOk | TelemetryDeployMarkerOutputBackendUnavailable;

export interface TelemetryAnalyzeInput {
  readonly concept: string;
  readonly window: number;
  readonly criteria: string;
}

export interface TelemetryAnalyzeOutputOk {
  readonly variant: 'ok';
  readonly healthy: boolean;
  readonly errorRate: number;
  readonly latencyP99: number;
  readonly sampleSize: number;
}

export interface TelemetryAnalyzeOutputInsufficientData {
  readonly variant: 'insufficientData';
  readonly concept: string;
  readonly samplesFound: number;
  readonly samplesNeeded: number;
}

export interface TelemetryAnalyzeOutputBackendUnavailable {
  readonly variant: 'backendUnavailable';
  readonly endpoint: string;
}

export type TelemetryAnalyzeOutput = TelemetryAnalyzeOutputOk | TelemetryAnalyzeOutputInsufficientData | TelemetryAnalyzeOutputBackendUnavailable;

// --- Variant constructors ---

export const configureOk = (config: string): TelemetryConfigureOutput => ({ variant: 'ok', config } as TelemetryConfigureOutput);

export const deployMarkerOk = (marker: string): TelemetryDeployMarkerOutput => ({ variant: 'ok', marker } as TelemetryDeployMarkerOutput);
export const deployMarkerBackendUnavailable = (endpoint: string): TelemetryDeployMarkerOutput => ({ variant: 'backendUnavailable', endpoint } as TelemetryDeployMarkerOutput);

export const analyzeOk = (healthy: boolean, errorRate: number, latencyP99: number, sampleSize: number): TelemetryAnalyzeOutput => ({ variant: 'ok', healthy, errorRate, latencyP99, sampleSize } as TelemetryAnalyzeOutput);
export const analyzeInsufficientData = (concept: string, samplesFound: number, samplesNeeded: number): TelemetryAnalyzeOutput => ({ variant: 'insufficientData', concept, samplesFound, samplesNeeded } as TelemetryAnalyzeOutput);
export const analyzeBackendUnavailable = (endpoint: string): TelemetryAnalyzeOutput => ({ variant: 'backendUnavailable', endpoint } as TelemetryAnalyzeOutput);

