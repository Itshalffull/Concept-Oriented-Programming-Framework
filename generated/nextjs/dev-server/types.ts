// DevServer â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for DevServer
export interface DevServerStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface DevServerStartInput {
  readonly port: number;
  readonly watchDirs: readonly string[];
}

export interface DevServerStartOutputOk {
  readonly variant: 'ok';
  readonly session: string;
  readonly port: number;
  readonly url: string;
}

export interface DevServerStartOutputPortInUse {
  readonly variant: 'portInUse';
  readonly port: number;
}

export type DevServerStartOutput = DevServerStartOutputOk | DevServerStartOutputPortInUse;

export interface DevServerStopInput {
  readonly session: string;
}

export interface DevServerStopOutput {
  readonly variant: 'ok';
  readonly session: string;
}

export interface DevServerStatusInput {
  readonly session: string;
}

export interface DevServerStatusOutputRunning {
  readonly variant: 'running';
  readonly port: number;
  readonly uptime: number;
  readonly lastRecompile: string;
}

export interface DevServerStatusOutputStopped {
  readonly variant: 'stopped';
}

export type DevServerStatusOutput = DevServerStatusOutputRunning | DevServerStatusOutputStopped;

// --- Variant constructors ---

export const startOk = (session: string, port: number, url: string): DevServerStartOutput => ({ variant: 'ok', session, port, url } as DevServerStartOutput);
export const startPortInUse = (port: number): DevServerStartOutput => ({ variant: 'portInUse', port } as DevServerStartOutput);

export const stopOk = (session: string): DevServerStopOutput => ({ variant: 'ok', session } as DevServerStopOutput);

export const statusRunning = (port: number, uptime: number, lastRecompile: string): DevServerStatusOutput => ({ variant: 'running', port, uptime, lastRecompile } as DevServerStatusOutput);
export const statusStopped = (): DevServerStatusOutput => ({ variant: 'stopped' } as DevServerStatusOutput);

