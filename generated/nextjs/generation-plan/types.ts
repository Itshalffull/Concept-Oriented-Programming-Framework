// GenerationPlan â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

import * as O from 'fp-ts/Option';

// Storage interface for GenerationPlan
export interface GenerationPlanStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface GenerationPlanBeginInput {
}

export interface GenerationPlanBeginOutput {
  readonly variant: 'ok';
  readonly run: string;
}

export interface GenerationPlanRecordStepInput {
  readonly stepKey: string;
  readonly status: string;
  readonly filesProduced: O.Option<number>;
  readonly duration: O.Option<number>;
  readonly cached: boolean;
}

export interface GenerationPlanRecordStepOutput {
  readonly variant: 'ok';
}

export interface GenerationPlanCompleteInput {
}

export interface GenerationPlanCompleteOutput {
  readonly variant: 'ok';
  readonly run: string;
}

export interface GenerationPlanStatusInput {
  readonly run: string;
}

export interface GenerationPlanStatusOutput {
  readonly variant: 'ok';
  readonly steps: readonly { readonly stepKey: string; readonly status: string; readonly duration: number; readonly cached: boolean; readonly filesProduced: number }[];
}

export interface GenerationPlanSummaryInput {
  readonly run: string;
}

export interface GenerationPlanSummaryOutput {
  readonly variant: 'ok';
  readonly total: number;
  readonly executed: number;
  readonly cached: number;
  readonly failed: number;
  readonly totalDuration: number;
  readonly filesProduced: number;
}

export interface GenerationPlanHistoryInput {
  readonly limit: O.Option<number>;
}

export interface GenerationPlanHistoryOutput {
  readonly variant: 'ok';
  readonly runs: readonly { readonly run: string; readonly startedAt: Date; readonly completedAt: O.Option<Date>; readonly total: number; readonly executed: number; readonly cached: number; readonly failed: number }[];
}

// --- Variant constructors ---

export const beginOk = (run: string): GenerationPlanBeginOutput => ({ variant: 'ok', run } as GenerationPlanBeginOutput);

export const recordStepOk = (): GenerationPlanRecordStepOutput => ({ variant: 'ok' } as GenerationPlanRecordStepOutput);

export const completeOk = (run: string): GenerationPlanCompleteOutput => ({ variant: 'ok', run } as GenerationPlanCompleteOutput);

export const statusOk = (steps: readonly { readonly stepKey: string; readonly status: string; readonly duration: number; readonly cached: boolean; readonly filesProduced: number }[]): GenerationPlanStatusOutput => ({ variant: 'ok', steps } as GenerationPlanStatusOutput);

export const summaryOk = (total: number, executed: number, cached: number, failed: number, totalDuration: number, filesProduced: number): GenerationPlanSummaryOutput => ({ variant: 'ok', total, executed, cached, failed, totalDuration, filesProduced } as GenerationPlanSummaryOutput);

export const historyOk = (runs: readonly { readonly run: string; readonly startedAt: Date; readonly completedAt: O.Option<Date>; readonly total: number; readonly executed: number; readonly cached: number; readonly failed: number }[]): GenerationPlanHistoryOutput => ({ variant: 'ok', runs } as GenerationPlanHistoryOutput);

