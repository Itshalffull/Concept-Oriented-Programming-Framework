// ErrorCorrelation â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for ErrorCorrelation
export interface ErrorCorrelationStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface ErrorCorrelationRecordInput {
  readonly flowId: string;
  readonly errorKind: string;
  readonly message: string;
  readonly rawEvent: string;
}

export interface ErrorCorrelationRecordOutput {
  readonly variant: 'ok';
  readonly error: string;
}

export interface ErrorCorrelationFindByEntityInput {
  readonly symbol: string;
  readonly since: string;
}

export interface ErrorCorrelationFindByEntityOutput {
  readonly variant: 'ok';
  readonly errors: string;
}

export interface ErrorCorrelationFindByKindInput {
  readonly errorKind: string;
  readonly since: string;
}

export interface ErrorCorrelationFindByKindOutput {
  readonly variant: 'ok';
  readonly errors: string;
}

export interface ErrorCorrelationErrorHotspotsInput {
  readonly since: string;
  readonly topN: number;
}

export interface ErrorCorrelationErrorHotspotsOutput {
  readonly variant: 'ok';
  readonly hotspots: string;
}

export interface ErrorCorrelationRootCauseInput {
  readonly error: string;
}

export interface ErrorCorrelationRootCauseOutputOk {
  readonly variant: 'ok';
  readonly chain: string;
  readonly likelyCause: string;
  readonly source: string;
}

export interface ErrorCorrelationRootCauseOutputInconclusive {
  readonly variant: 'inconclusive';
  readonly partialChain: string;
}

export type ErrorCorrelationRootCauseOutput = ErrorCorrelationRootCauseOutputOk | ErrorCorrelationRootCauseOutputInconclusive;

export interface ErrorCorrelationGetInput {
  readonly error: string;
}

export interface ErrorCorrelationGetOutputOk {
  readonly variant: 'ok';
  readonly error: string;
  readonly flowId: string;
  readonly errorKind: string;
  readonly errorMessage: string;
  readonly timestamp: string;
}

export interface ErrorCorrelationGetOutputNotfound {
  readonly variant: 'notfound';
}

export type ErrorCorrelationGetOutput = ErrorCorrelationGetOutputOk | ErrorCorrelationGetOutputNotfound;

// --- Variant constructors ---

export const recordOk = (error: string): ErrorCorrelationRecordOutput => ({ variant: 'ok', error } as ErrorCorrelationRecordOutput);

export const findByEntityOk = (errors: string): ErrorCorrelationFindByEntityOutput => ({ variant: 'ok', errors } as ErrorCorrelationFindByEntityOutput);

export const findByKindOk = (errors: string): ErrorCorrelationFindByKindOutput => ({ variant: 'ok', errors } as ErrorCorrelationFindByKindOutput);

export const errorHotspotsOk = (hotspots: string): ErrorCorrelationErrorHotspotsOutput => ({ variant: 'ok', hotspots } as ErrorCorrelationErrorHotspotsOutput);

export const rootCauseOk = (chain: string, likelyCause: string, source: string): ErrorCorrelationRootCauseOutput => ({ variant: 'ok', chain, likelyCause, source } as ErrorCorrelationRootCauseOutput);
export const rootCauseInconclusive = (partialChain: string): ErrorCorrelationRootCauseOutput => ({ variant: 'inconclusive', partialChain } as ErrorCorrelationRootCauseOutput);

export const getOk = (error: string, flowId: string, errorKind: string, errorMessage: string, timestamp: string): ErrorCorrelationGetOutput => ({ variant: 'ok', error, flowId, errorKind, errorMessage, timestamp } as ErrorCorrelationGetOutput);
export const getNotfound = (): ErrorCorrelationGetOutput => ({ variant: 'notfound' } as ErrorCorrelationGetOutput);

