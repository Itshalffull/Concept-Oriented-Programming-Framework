// EcsRuntime â€” types.ts
// Generated by NextjsGen. Do not edit manually.
// Uses fp-ts for purely functional, composable concept implementations.

// Storage interface for EcsRuntime
export interface EcsRuntimeStorage {
  readonly get: (relation: string, key: string) => Promise<Record<string, unknown> | null>;
  readonly put: (relation: string, key: string, value: Record<string, unknown>) => Promise<void>;
  readonly delete: (relation: string, key: string) => Promise<boolean>;
  readonly find: (relation: string, filter?: Record<string, unknown>) => Promise<readonly Record<string, unknown>[]>;
}

export interface EcsRuntimeProvisionInput {
  readonly concept: string;
  readonly cpu: number;
  readonly memory: number;
  readonly cluster: string;
}

export interface EcsRuntimeProvisionOutputOk {
  readonly variant: 'ok';
  readonly service: string;
  readonly serviceArn: string;
  readonly endpoint: string;
}

export interface EcsRuntimeProvisionOutputCapacityUnavailable {
  readonly variant: 'capacityUnavailable';
  readonly cluster: string;
  readonly requested: string;
}

export interface EcsRuntimeProvisionOutputClusterNotFound {
  readonly variant: 'clusterNotFound';
  readonly cluster: string;
}

export type EcsRuntimeProvisionOutput = EcsRuntimeProvisionOutputOk | EcsRuntimeProvisionOutputCapacityUnavailable | EcsRuntimeProvisionOutputClusterNotFound;

export interface EcsRuntimeDeployInput {
  readonly service: string;
  readonly imageUri: string;
}

export interface EcsRuntimeDeployOutputOk {
  readonly variant: 'ok';
  readonly service: string;
  readonly taskDefinition: string;
}

export interface EcsRuntimeDeployOutputImageNotFound {
  readonly variant: 'imageNotFound';
  readonly imageUri: string;
}

export interface EcsRuntimeDeployOutputHealthCheckFailed {
  readonly variant: 'healthCheckFailed';
  readonly service: string;
  readonly failedTasks: number;
}

export type EcsRuntimeDeployOutput = EcsRuntimeDeployOutputOk | EcsRuntimeDeployOutputImageNotFound | EcsRuntimeDeployOutputHealthCheckFailed;

export interface EcsRuntimeSetTrafficWeightInput {
  readonly service: string;
  readonly weight: number;
}

export interface EcsRuntimeSetTrafficWeightOutput {
  readonly variant: 'ok';
  readonly service: string;
}

export interface EcsRuntimeRollbackInput {
  readonly service: string;
  readonly targetTaskDefinition: string;
}

export interface EcsRuntimeRollbackOutput {
  readonly variant: 'ok';
  readonly service: string;
}

export interface EcsRuntimeDestroyInput {
  readonly service: string;
}

export interface EcsRuntimeDestroyOutputOk {
  readonly variant: 'ok';
  readonly service: string;
}

export interface EcsRuntimeDestroyOutputDrainTimeout {
  readonly variant: 'drainTimeout';
  readonly service: string;
  readonly activeConnections: number;
}

export type EcsRuntimeDestroyOutput = EcsRuntimeDestroyOutputOk | EcsRuntimeDestroyOutputDrainTimeout;

// --- Variant constructors ---

export const provisionOk = (service: string, serviceArn: string, endpoint: string): EcsRuntimeProvisionOutput => ({ variant: 'ok', service, serviceArn, endpoint } as EcsRuntimeProvisionOutput);
export const provisionCapacityUnavailable = (cluster: string, requested: string): EcsRuntimeProvisionOutput => ({ variant: 'capacityUnavailable', cluster, requested } as EcsRuntimeProvisionOutput);
export const provisionClusterNotFound = (cluster: string): EcsRuntimeProvisionOutput => ({ variant: 'clusterNotFound', cluster } as EcsRuntimeProvisionOutput);

export const deployOk = (service: string, taskDefinition: string): EcsRuntimeDeployOutput => ({ variant: 'ok', service, taskDefinition } as EcsRuntimeDeployOutput);
export const deployImageNotFound = (imageUri: string): EcsRuntimeDeployOutput => ({ variant: 'imageNotFound', imageUri } as EcsRuntimeDeployOutput);
export const deployHealthCheckFailed = (service: string, failedTasks: number): EcsRuntimeDeployOutput => ({ variant: 'healthCheckFailed', service, failedTasks } as EcsRuntimeDeployOutput);

export const setTrafficWeightOk = (service: string): EcsRuntimeSetTrafficWeightOutput => ({ variant: 'ok', service } as EcsRuntimeSetTrafficWeightOutput);

export const rollbackOk = (service: string): EcsRuntimeRollbackOutput => ({ variant: 'ok', service } as EcsRuntimeRollbackOutput);

export const destroyOk = (service: string): EcsRuntimeDestroyOutput => ({ variant: 'ok', service } as EcsRuntimeDestroyOutput);
export const destroyDrainTimeout = (service: string, activeConnections: number): EcsRuntimeDestroyOutput => ({ variant: 'drainTimeout', service, activeConnections } as EcsRuntimeDestroyOutput);

