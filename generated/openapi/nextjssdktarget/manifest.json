{
  "uri": "urn:clef/NextjsSdkTarget",
  "name": "NextjsSdkTarget",
  "typeParams": [
    {
      "name": "S",
      "wireType": "string"
    }
  ],
  "relations": [
    {
      "name": "entries",
      "source": "merged",
      "keyField": {
        "name": "s",
        "paramRef": "S"
      },
      "fields": [
        {
          "name": "packageName",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          },
          "optional": false
        },
        {
          "name": "runtime",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          },
          "optional": false
        }
      ]
    },
    {
      "name": "packages",
      "source": "set-valued",
      "keyField": {
        "name": "s",
        "paramRef": "S"
      },
      "fields": [
        {
          "name": "value",
          "type": {
            "kind": "param",
            "paramRef": "S"
          },
          "optional": false
        }
      ]
    }
  ],
  "actions": [
    {
      "name": "generate",
      "params": [
        {
          "name": "projection",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          }
        },
        {
          "name": "config",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          }
        }
      ],
      "variants": [
        {
          "tag": "ok",
          "fields": [
            {
              "name": "package",
              "type": {
                "kind": "param",
                "paramRef": "S"
              }
            },
            {
              "name": "files",
              "type": {
                "kind": "list",
                "inner": {
                  "kind": "primitive",
                  "primitive": "String"
                }
              }
            }
          ],
          "prose": "Map concept types to fp ts branded TypeScript types \n Map actions to const arrow functions returning \n TaskEither Generate Server Action wrappers using \n use server directive Generate React hooks using \n use client directive Generate package json and \n tsconfig json"
        }
      ]
    }
  ],
  "invariants": [
    {
      "description": "invariant 1: after generate, generate behaves correctly",
      "setup": [
        {
          "action": "generate",
          "inputs": [
            {
              "name": "projection",
              "value": {
                "kind": "literal",
                "value": "test-projection"
              }
            },
            {
              "name": "config",
              "value": {
                "kind": "literal",
                "value": "{}"
              }
            }
          ],
          "expectedVariant": "ok",
          "expectedOutputs": [
            {
              "name": "package",
              "value": {
                "kind": "variable",
                "name": "s"
              }
            },
            {
              "name": "files",
              "value": {
                "kind": "variable",
                "name": "f"
              }
            }
          ]
        }
      ],
      "assertions": [
        {
          "action": "generate",
          "inputs": [
            {
              "name": "projection",
              "value": {
                "kind": "literal",
                "value": "test-projection-2"
              }
            },
            {
              "name": "config",
              "value": {
                "kind": "literal",
                "value": "{}"
              }
            }
          ],
          "expectedVariant": "ok",
          "expectedOutputs": [
            {
              "name": "package",
              "value": {
                "kind": "variable",
                "name": "s2"
              }
            },
            {
              "name": "files",
              "value": {
                "kind": "variable",
                "name": "f2"
              }
            }
          ]
        }
      ],
      "freeVariables": [
        {
          "name": "s",
          "testValue": "u-test-invariant-001"
        },
        {
          "name": "f",
          "testValue": "u-test-invariant-002"
        },
        {
          "name": "s2",
          "testValue": "u-test-invariant-003"
        },
        {
          "name": "f2",
          "testValue": "u-test-invariant-004"
        }
      ]
    }
  ],
  "graphqlSchema": "type NextjsSdkTargetState {\n  \"\"\"All ss in this concept\"\"\"\n  ss: [ID!]!\n}\n\ntype NextjsSdkTargetEntry {\n  s: ID!\n  packageName: String!\n  runtime: String!\n}\n\nextend type Query {\n  nextjssdktarget_entry(s: ID!): NextjsSdkTargetEntry\n  nextjssdktarget_entries: [NextjsSdkTargetEntry!]!\n}\n\ntype NextjsSdkTargetPackages {\n  s: ID!\n  value: ID!\n}",
  "jsonSchemas": {
    "invocations": {
      "generate": {
        "$id": "urn:clef/NextjsSdkTarget/generate/invocation",
        "type": "object",
        "properties": {
          "concept": {
            "const": "urn:clef/NextjsSdkTarget"
          },
          "action": {
            "const": "generate"
          },
          "input": {
            "type": "object",
            "properties": {
              "projection": {
                "type": "string"
              },
              "config": {
                "type": "string"
              }
            },
            "required": [
              "projection",
              "config"
            ]
          }
        }
      }
    },
    "completions": {
      "generate": {
        "ok": {
          "$id": "urn:clef/NextjsSdkTarget/generate/completion/ok",
          "type": "object",
          "properties": {
            "concept": {
              "const": "urn:clef/NextjsSdkTarget"
            },
            "action": {
              "const": "generate"
            },
            "variant": {
              "const": "ok"
            },
            "output": {
              "type": "object",
              "properties": {
                "package": {
                  "type": "string"
                },
                "files": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "package",
                "files"
              ]
            }
          }
        }
      }
    }
  },
  "capabilities": [],
  "purpose": "Generate idiomatic Next js SDK client libraries using fp ts \n Produces typed client modules with TaskEither based methods , \n Server Action wrappers for direct invocation from Server \n Components , and React hooks ( useConceptAction , useConceptQuery ) \n for Client Components All code is purely functional no \n classes , only const arrow functions and pipe composition \n Package includes next config js integration helpers"
}
