{
  "uri": "urn:clef/GTKAdapter",
  "name": "GTKAdapter",
  "typeParams": [
    {
      "name": "A",
      "wireType": "string"
    }
  ],
  "relations": [
    {
      "name": "entries",
      "source": "merged",
      "keyField": {
        "name": "a",
        "paramRef": "A"
      },
      "fields": [
        {
          "name": "outputs",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          },
          "optional": false
        }
      ]
    }
  ],
  "actions": [
    {
      "name": "normalize",
      "params": [
        {
          "name": "adapter",
          "type": {
            "kind": "param",
            "paramRef": "A"
          }
        },
        {
          "name": "props",
          "type": {
            "kind": "primitive",
            "primitive": "String"
          }
        }
      ],
      "variants": [
        {
          "tag": "ok",
          "fields": [
            {
              "name": "adapter",
              "type": {
                "kind": "param",
                "paramRef": "A"
              }
            },
            {
              "name": "normalized",
              "type": {
                "kind": "primitive",
                "primitive": "String"
              }
            }
          ],
          "prose": "Map framework neutral props to GTK bindings \n Convert onclick to GSignal clicked Convert class to \n GTK CSS classes Map layout to GtkBox GtkGrid \n Resolve design tokens to GTK CSS custom properties"
        },
        {
          "tag": "error",
          "fields": [
            {
              "name": "message",
              "type": {
                "kind": "primitive",
                "primitive": "String"
              }
            }
          ],
          "prose": "Props contain patterns not mappable to GTK"
        }
      ]
    }
  ],
  "invariants": [
    {
      "description": "invariant 1: after normalize, normalize behaves correctly",
      "setup": [
        {
          "action": "normalize",
          "inputs": [
            {
              "name": "adapter",
              "value": {
                "kind": "variable",
                "name": "a"
              }
            },
            {
              "name": "props",
              "value": {
                "kind": "literal",
                "value": "{ \"onclick\": \"handler_1\", \"class\": \"btn\" }"
              }
            }
          ],
          "expectedVariant": "ok",
          "expectedOutputs": [
            {
              "name": "adapter",
              "value": {
                "kind": "variable",
                "name": "a"
              }
            },
            {
              "name": "normalized",
              "value": {
                "kind": "variable",
                "name": "_"
              }
            }
          ]
        }
      ],
      "assertions": [
        {
          "action": "normalize",
          "inputs": [
            {
              "name": "adapter",
              "value": {
                "kind": "variable",
                "name": "a"
              }
            },
            {
              "name": "props",
              "value": {
                "kind": "literal",
                "value": ""
              }
            }
          ],
          "expectedVariant": "error",
          "expectedOutputs": [
            {
              "name": "message",
              "value": {
                "kind": "variable",
                "name": "_"
              }
            }
          ]
        }
      ],
      "freeVariables": [
        {
          "name": "a",
          "testValue": "u-test-invariant-001"
        }
      ]
    }
  ],
  "graphqlSchema": "type GTKAdapterState {\n  \"\"\"All as in this concept\"\"\"\n  as: [ID!]!\n}\n\ntype GTKAdapterEntry {\n  a: ID!\n  outputs: String!\n}\n\nextend type Query {\n  gtkadapter_entry(a: ID!): GTKAdapterEntry\n  gtkadapter_entries: [GTKAdapterEntry!]!\n}",
  "jsonSchemas": {
    "invocations": {
      "normalize": {
        "$id": "urn:clef/GTKAdapter/normalize/invocation",
        "type": "object",
        "properties": {
          "concept": {
            "const": "urn:clef/GTKAdapter"
          },
          "action": {
            "const": "normalize"
          },
          "input": {
            "type": "object",
            "properties": {
              "adapter": {
                "type": "string"
              },
              "props": {
                "type": "string"
              }
            },
            "required": [
              "adapter",
              "props"
            ]
          }
        }
      }
    },
    "completions": {
      "normalize": {
        "ok": {
          "$id": "urn:clef/GTKAdapter/normalize/completion/ok",
          "type": "object",
          "properties": {
            "concept": {
              "const": "urn:clef/GTKAdapter"
            },
            "action": {
              "const": "normalize"
            },
            "variant": {
              "const": "ok"
            },
            "output": {
              "type": "object",
              "properties": {
                "adapter": {
                  "type": "string"
                },
                "normalized": {
                  "type": "string"
                }
              },
              "required": [
                "adapter",
                "normalized"
              ]
            }
          }
        },
        "error": {
          "$id": "urn:clef/GTKAdapter/normalize/completion/error",
          "type": "object",
          "properties": {
            "concept": {
              "const": "urn:clef/GTKAdapter"
            },
            "action": {
              "const": "normalize"
            },
            "variant": {
              "const": "error"
            },
            "output": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          }
        }
      }
    }
  },
  "capabilities": [],
  "purpose": "Normalize framework neutral props into GTK 4 specific bindings \n Transforms Clef Surface s generic event model into GTK conventions : \n GtkWidget subclasses , GSignal handlers , GtkBox GtkGrid layout , \n CSS based styling via GtkCssProvider Supports GNOME HIG \n ( Human Interface Guidelines ) defaults \n Implementation in Rust ( gtk rs ) or C , runs natively on Linux"
}
