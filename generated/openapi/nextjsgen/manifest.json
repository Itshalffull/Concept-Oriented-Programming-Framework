{
  "uri": "urn:clef/NextjsGen",
  "name": "NextjsGen",
  "typeParams": [
    {
      "name": "S",
      "wireType": "string"
    }
  ],
  "relations": [
    {
      "name": "entries",
      "source": "merged",
      "keyField": {
        "name": "s",
        "paramRef": "S"
      },
      "fields": [
        {
          "name": "outputs",
          "type": {
            "kind": "list",
            "inner": {
              "kind": "record",
              "fields": [
                {
                  "name": "path",
                  "type": {
                    "kind": "primitive",
                    "primitive": "String"
                  },
                  "optional": false
                },
                {
                  "name": "content",
                  "type": {
                    "kind": "primitive",
                    "primitive": "String"
                  },
                  "optional": false
                }
              ]
            }
          },
          "optional": false
        }
      ]
    }
  ],
  "actions": [
    {
      "name": "generate",
      "params": [
        {
          "name": "spec",
          "type": {
            "kind": "param",
            "paramRef": "S"
          }
        },
        {
          "name": "manifest",
          "type": {
            "kind": "primitive",
            "primitive": "ConceptManifest"
          }
        }
      ],
      "variants": [
        {
          "tag": "ok",
          "fields": [
            {
              "name": "files",
              "type": {
                "kind": "list",
                "inner": {
                  "kind": "record",
                  "fields": [
                    {
                      "name": "path",
                      "type": {
                        "kind": "primitive",
                        "primitive": "String"
                      },
                      "optional": false
                    },
                    {
                      "name": "content",
                      "type": {
                        "kind": "primitive",
                        "primitive": "String"
                      },
                      "optional": false
                    }
                  ]
                }
              }
            }
          ],
          "prose": "Map ResolvedTypes to fp ts branded types \n Emit type definitions for action inputs outputs using \n readonly interfaces and tagged unions \n Emit handler module with one function per action returning \n TaskEither \n Emit Next js Route Handler adapter ( App Router ) \n Emit conformance tests using vitest and fp ts assertions"
        },
        {
          "tag": "error",
          "fields": [
            {
              "name": "message",
              "type": {
                "kind": "primitive",
                "primitive": "String"
              }
            }
          ],
          "prose": "If the manifest contains types not mappable to TypeScript \n with fp ts"
        }
      ]
    }
  ],
  "invariants": [],
  "graphqlSchema": "type NextjsGenState {\n  \"\"\"All ss in this concept\"\"\"\n  ss: [ID!]!\n}\n\ntype NextjsGenEntry {\n  s: ID!\n  outputs: [JSON!]!\n}\n\nextend type Query {\n  nextjsgen_entry(s: ID!): NextjsGenEntry\n  nextjsgen_entries: [NextjsGenEntry!]!\n}",
  "jsonSchemas": {
    "invocations": {
      "generate": {
        "$id": "urn:clef/NextjsGen/generate/invocation",
        "type": "object",
        "properties": {
          "concept": {
            "const": "urn:clef/NextjsGen"
          },
          "action": {
            "const": "generate"
          },
          "input": {
            "type": "object",
            "properties": {
              "spec": {
                "type": "string"
              },
              "manifest": {
                "type": "string"
              }
            },
            "required": [
              "spec",
              "manifest"
            ]
          }
        }
      }
    },
    "completions": {
      "generate": {
        "ok": {
          "$id": "urn:clef/NextjsGen/generate/completion/ok",
          "type": "object",
          "properties": {
            "concept": {
              "const": "urn:clef/NextjsGen"
            },
            "action": {
              "const": "generate"
            },
            "variant": {
              "const": "ok"
            },
            "output": {
              "type": "object",
              "properties": {
                "files": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "path": {
                        "type": "string"
                      },
                      "content": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "path",
                      "content"
                    ]
                  }
                }
              },
              "required": [
                "files"
              ]
            }
          }
        },
        "error": {
          "$id": "urn:clef/NextjsGen/generate/completion/error",
          "type": "object",
          "properties": {
            "concept": {
              "const": "urn:clef/NextjsGen"
            },
            "action": {
              "const": "generate"
            },
            "variant": {
              "const": "error"
            },
            "output": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          }
        }
      }
    }
  },
  "capabilities": [],
  "purpose": "Generate Next js App Router code from a ConceptManifest using \n fp ts for purely functional concept implementations Produces \n type definitions with branded types , handler modules using \n TaskEither and pipe , transport adapters as Next js Route \n Handlers , and conformance tests All generated code uses \n functional composition no classes , no mutation"
}
