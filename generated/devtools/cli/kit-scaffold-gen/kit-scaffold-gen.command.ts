// Auto-generated by COPF Interface Kit — cli target
// Concept: KitScaffoldGen
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const kitScaffoldGenCommand = new Command('kit-scaffold-gen')
  .description('Generate kit manifest (kit.yaml) and directory structure.');

kitScaffoldGenCommand
  .command('register')
  .description('Self-register with PluginRegistry so the scaffolding kit\'s KindSystem can track KitConfig → KitManifest transformations.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kitScaffoldGenCommand
  .command('kit')
  .description('Scaffold a new COPF kit with kit.yaml, concept stubs, and sync directories.')
  .requiredOption('-n, --name <name>', 'Kit name (kebab-case)')
  .option('-d, --description <description>', 'Kit description')
  .option('-c, --concepts <concepts>', 'Comma-separated PascalCase concept names')
  .option('--syncs <syncs>', 'Comma-separated sync declarations (Name:tier)')
  .option('--dependencies <dependencies>', 'Comma-separated kit dependencies')
  .option('--domain', 'Include infrastructure section for domain kit')
  .option('-o, --output <output>', 'Output directory (default: ./kits/<name>)')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const kitScaffoldGenCommandTree = {
  group: 'kit-scaffold-gen',
  description: 'Generate kit manifest (kit.yaml) and directory structure.',
  commands: [{ action: 'register', command: 'register' }, { action: 'generate', command: 'kit' }],
};
