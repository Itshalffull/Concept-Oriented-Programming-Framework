// Auto-generated by COPF Interface Kit â€” cli target
// Concept: KitScaffoldGen
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const kitScaffoldGenCommand = new Command('scaffold')
  .description('Generate kit manifest (kit.yaml) and directory structure.');

kitScaffoldGenCommand
  .command('kit')
  .description('Scaffold a new COPF kit with kit.yaml, concept stubs, and sync directories.')
  .requiredOption('-n, --name <name>', 'Kit name (kebab-case)')
  .option('-d, --description <description>', 'Kit description')
  .option('-c, --concepts <concepts>', 'Comma-separated PascalCase concept names')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf scaffold kit --name auth --concepts User,Session,Password  # Scaffold a basic kit')
  .addHelpText('after', '  copf scaffold kit --name web3 --concepts Token,Wallet --domain  # Scaffold a domain kit with infrastructure')
  .addHelpText('after', '  copf scaffold kit --name auth --concepts User --syncs ValidateSession:required,RefreshExpired:recommended  # Scaffold with syncs')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kitScaffoldGenCommand
  .command('preview')
  .description('Dry-run: compute output files without writing. Uses Emitter content-addressing to show what would change.')
  .requiredOption('-n, --name <name>', 'Kit name (kebab-case)')
  .requiredOption('--description <description>', 'Description')
  .option('-c, --concepts <concepts>', 'Comma-separated PascalCase concept names')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'preview', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

kitScaffoldGenCommand
  .command('register')
  .description('Return static metadata for PluginRegistry 
 name : KitScaffoldGen 
 inputKind : KitConfig 
 outputKind : KitManifest 
 capabilities : [ kit-yaml , directory-structure ]')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const kitScaffoldGenCommandTree = {
  group: 'scaffold',
  description: 'Generate kit manifest (kit.yaml) and directory structure.',
  commands: [{ action: 'generate', command: 'kit' }, { action: 'preview', command: 'preview' }, { action: 'register', command: 'register' }],
};
