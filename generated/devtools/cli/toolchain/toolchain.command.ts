// Auto-generated by Clef Clef Bind — cli target
// Concept: Toolchain
// Do not edit manually; regenerate with: clef interface generate

import { Command } from 'commander';

export const toolchainCommand = new Command('toolchain')
  .description('Use when resolving, validating, or listing compiler toolchains for the build layer. Routes resolution to language-specific providers (SwiftToolchain, TypeScriptToolchain, RustToolchain, SolidityToolchain).');

toolchainCommand
  .command('resolve')
  .description('Find and validate a compiler toolchain for a language and platform. Routes to language-specific providers.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'resolve', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

toolchainCommand
  .command('validate')
  .description('Verify a previously resolved toolchain is still valid — tool exists at path, version matches.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'validate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

toolchainCommand
  .command('list')
  .description('List all resolved toolchains, optionally filtered by language.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'list', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

toolchainCommand
  .command('capabilities')
  .description('Return detailed capabilities for a resolved tool.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'capabilities', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const toolchainCommandTree = {
  group: 'toolchain',
  description: 'Use when resolving, validating, or listing compiler toolchains for the build layer. Routes resolution to language-specific providers (SwiftToolchain, TypeScriptToolchain, RustToolchain, SolidityToolchain).',
  commands: [{ action: 'resolve', command: 'resolve' }, { action: 'validate', command: 'validate' }, { action: 'list', command: 'list' }, { action: 'capabilities', command: 'capabilities' }],
};
