// Auto-generated by COPF Interface Kit — cli target
// Concept: Builder
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const builderCommand = new Command('builder')
  .description('Use when compiling, testing, and packaging concept implementations across languages. Coordinates build operations and routes to language-specific providers (SwiftBuilder, TypeScriptBuilder, RustBuilder, SolidityBuilder).');

builderCommand
  .command('build')
  .description('Compile, test, and package a concept implementation for a language and platform. Routes to language-specific providers.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'build', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

builderCommand
  .command('buildAll')
  .description('Build multiple concepts across multiple target languages and platforms in parallel.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'buildAll', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

builderCommand
  .command('test')
  .description('Run tests only for a previously built concept — no recompilation.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'test', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

builderCommand
  .command('status')
  .description('Check the current status of a build: pending, compiling, testing, packaging, done, or failed.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'status', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

builderCommand
  .command('history')
  .description('Show build history for a concept, optionally filtered by language.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'history', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const builderCommandTree = {
  group: 'builder',
  description: 'Use when compiling, testing, and packaging concept implementations across languages. Coordinates build operations and routes to language-specific providers (SwiftBuilder, TypeScriptBuilder, RustBuilder, SolidityBuilder).',
  commands: [{ action: 'build', command: 'build' }, { action: 'buildAll', command: 'buildAll' }, { action: 'test', command: 'test' }, { action: 'status', command: 'status' }, { action: 'history', command: 'history' }],
};
