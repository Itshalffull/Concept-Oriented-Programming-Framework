<!-- Auto-generated by COPF Interface Kit — cli target -->
<!-- Concept: BuildCache -->
<!-- Do not edit manually; regenerate with: copf interface generate -->

# copf build-cache — Help

Manage incremental build cache for **<source>** with hash-based invalidation and per-step granularity.


> **When to use:** Use when checking cache validity, recording generation results, or invalidating stale entries for incremental rebuilds.


## Design Principles

- **Hash-Based Invalidation:** Cache validity is determined solely by comparing input hashes — no timestamps or file watchers.
- **Per-Step Granularity:** Each generator+concept pair has its own cache entry, enabling partial rebuilds.
**check:**
- [ ] Step key uniquely identifies this generation step?
- [ ] Input hash is deterministic?

**record:**
- [ ] Output hash computed from actual files written?
- [ ] Source locator recorded for invalidation?

**status:**
- [ ] Stale entries identified?

**staleSteps:**
- [ ] All step keys evaluated?
## References

- [BuildCache design and invalidation strategy](references/build-cache-architecture.md)
## Quick Reference

| Action | Command | Purpose |
|--------|---------|---------|
| check | `copf build-cache check` | Check if step is cached |
| record | `copf build-cache record` | Record generation result |
| status | `copf build-cache status` | Show all cache entries |
| staleSteps | `copf build-cache stale-steps` | List stale entries |
| invalidate | `copf build-cache invalidate` | Invalidate one step |
| invalidateBySource | `copf build-cache invalidate-by-source` | Invalidate by source file |
| invalidateByKind | `copf build-cache invalidate-by-kind` | Invalidate by IR kind |
| invalidateAll | `copf build-cache invalidate-all` | Clear entire cache |


## Validation

*Show cache status:*
```bash
npx tsx tools/copf-cli/src/index.ts generate --status
```
## Related Skills

- /file-emission — Emitter writes files after cache miss
- /incremental-caching — Self-referential: cache checks gate generation
