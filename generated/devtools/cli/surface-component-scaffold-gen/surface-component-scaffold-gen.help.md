<!-- Auto-generated by Clef Clef Bind — cli target -->
<!-- Concept: SurfaceComponentScaffoldGen -->
<!-- Do not edit manually; regenerate with: clef interface generate -->

# clef surface-component-scaffold-gen — Help

Scaffold a Clef Surface headless component **<source>** with widget FSM, anatomy parts, machine implementation, and suite manifest.


> **When to use:** Use when creating a new Clef Surface headless component. Generates a complete component scaffold including widget specification (FSM), anatomy definition (parts contract), machine implementation, and suite manifest.


## Design Principles

- **Behavior-Rendering Separation:** Widget specs define behavior (states, transitions, guards). Rendering is handled by framework adapters. They agree only on part names (anatomy).
- **Finite State Machine Discipline:** Every component is a finite state machine with explicit states, events, transitions, and guards. No implicit state.
- **Anatomy Contract:** The anatomy defines named parts (root, trigger, content, etc.) that both the machine and renderer reference. This is the only coupling point.
- **Props API via connect():** The machine's connect() action transforms internal state into framework-neutral props objects — one per anatomy part.
**generate:**
- [ ] Component name is PascalCase?
- [ ] Parts list defines all structural elements?
- [ ] States define all machine states?
- [ ] Events define all transitions?
- [ ] Anatomy lists all parts and slots?
- [ ] Machine implementation has spawn, send, connect, destroy actions?
- [ ] Kit manifest declares dependencies on surface-core and surface-component?
- [ ] All files written through Emitter (not directly to disk)?
- [ ] Source provenance attached to each file?
- [ ] Generation step recorded in GenerationPlan?
## References

- [Clef Surface headless component architecture](references/surface-component-guide.md)
## Supporting Materials

- [Clef Surface component scaffolding walkthrough](examples/scaffold-surface-component.md)
## Quick Reference

| Input | Type | Purpose |
|-------|------|---------|
| name | String | PascalCase component name |
| parts | list String | Anatomy part names (root, trigger, content, etc.) |
| slots | list String | Named slot insertion points |
| states | list String | FSM state names |
| events | list String | FSM event names |
| a11y | { role, ariaProps } | Accessibility configuration |

**Output Files:**
| File | Purpose |
|------|---------|
| `{name}-widget.concept` | Widget FSM specification |
| `{name}-anatomy.concept` | Parts contract definition |
| `suite.yaml` | Kit manifest with dependencies |
| `{name}-machine.handler.ts` | Machine handler implementation |


## Anti-Patterns

### Rendering logic in widget spec
Widget spec includes CSS, HTML, or framework-specific code — violates behavior-rendering separation.

**Bad:**
```
widget Dialog {
  render {
    <div class="dialog-overlay">  # HTML in spec!
      <div class="dialog-content">...</div>
    </div>
  }
}

```

**Good:**
```
widget Dialog {
  anatomy {
    part root        # Just names — rendering
    part backdrop    # is the adapter's job
    part content
  }
}

```

### Implicit state transitions
Component changes state without explicit events — makes behavior unpredictable.

**Bad:**
```
machine {
  state open {
    # Implicitly closes after 5 seconds — not declarative!
    after 5000ms -> closed
  }
}

```

**Good:**
```
machine {
  state open {
    on close -> closed
    on timeout -> closed  # Explicit event
  }
}

```
## Validation

*Generate a Clef Surface component scaffold:*
```bash
npx tsx cli/src/index.ts scaffold component --name Dialog --parts root,trigger,content --states closed,open
```
*Run scaffold generator tests:*
```bash
npx vitest run tests/scaffold-generators.test.ts
```
## Related Skills

- /surface-theme-scaffold — Generate themes to style the component
- /concept-scaffold — Generate concept specs for custom component concepts
- /suite-scaffold — Generate suite manifests for component libraries
