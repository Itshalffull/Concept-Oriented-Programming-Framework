// Auto-generated by Clef Clef Bind â€” cli target
// Concept: DevServer
// Do not edit manually; regenerate with: clef interface generate

import { Command } from 'commander';

export const devServerCommand = new Command('dev-server')
  .description('Run a local development server that watches concept specs 
 and syncs for changes , re compiles on save , and serves 
 the generated artifacts');

devServerCommand
  .command('start')
  .description('Start the development server on the specified port 
 Watch the specs and syncs directories for changes 
 Auto recompile when files are modified')
  .requiredOption('--port <port>', 'Port')
  .requiredOption('--specs <specs>', 'Specs')
  .requiredOption('--syncs <syncs>', 'Syncs')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'start', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

devServerCommand
  .command('stop')
  .description('Stop a running development server session')
  .requiredOption('--session <session>', 'Session')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'stop', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

devServerCommand
  .command('status')
  .description('Check the current status of a development server session')
  .requiredOption('--session <session>', 'Session')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'status', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const devServerCommandTree = {
  group: 'dev-server',
  description: 'Run a local development server that watches concept specs 
 and syncs for changes , re compiles on save , and serves 
 the generated artifacts',
  commands: [{ action: 'start', command: 'start' }, { action: 'stop', command: 'stop' }, { action: 'status', command: 'status' }],
};
