// Auto-generated by COPF Interface Kit â€” cli target
// Concept: GenerationPlan
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const generationPlanCommand = new Command('generation-plan')
  .description('Track and inspect generation runs.');

generationPlanCommand
  .command('begin')
  .description('Mark a new generation run as started')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'begin', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

generationPlanCommand
  .command('record-step')
  .description('Record a step outcome in the current run')
  .requiredOption('-k, --step-key <stepKey>', 'Step identifier')
  .requiredOption('--status <status>', 'Step outcome (done, cached, failed)')
  .requiredOption('--files-produced <filesProduced>', 'Files Produced')
  .requiredOption('--duration <duration>', 'Duration')
  .option('--cached <cached>', 'Whether the step was a cache hit')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'recordStep', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

generationPlanCommand
  .command('complete')
  .description('Mark the current generation run as finished')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'complete', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

generationPlanCommand
  .command('status')
  .description('Show step-by-step status of a generation run')
  .requiredOption('--run <run>', 'Run')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf generation-plan status  # Show current run status')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'status', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

generationPlanCommand
  .command('summary')
  .description('Show aggregate statistics for a generation run')
  .requiredOption('--run <run>', 'Run')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf generation-plan summary  # Show run summary')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'summary', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

generationPlanCommand
  .command('history')
  .description('Show recent generation runs')
  .option('-n, --limit <limit>', 'Maximum number of runs to show', '10')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf generation-plan history --limit 5  # Show last 5 runs')
  .addHelpText('after', '  copf generation-plan history  # Show last 10 runs')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'history', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const generationPlanCommandTree = {
  group: 'generation-plan',
  description: 'Track and inspect generation runs.',
  commands: [{ action: 'begin', command: 'begin' }, { action: 'recordStep', command: 'record-step' }, { action: 'complete', command: 'complete' }, { action: 'status', command: 'status' }, { action: 'summary', command: 'summary' }, { action: 'history', command: 'history' }],
};
