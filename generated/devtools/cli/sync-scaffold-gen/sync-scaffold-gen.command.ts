// Auto-generated by COPF Interface Kit â€” cli target
// Concept: SyncScaffoldGen
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const syncScaffoldGenCommand = new Command('scaffold')
  .description('Generate synchronization rule (.sync) file.');

syncScaffoldGenCommand
  .command('sync')
  .description('Scaffold a .sync file with when/where/then clauses.')
  .requiredOption('-n, --name <name>', 'PascalCase sync name')
  .requiredOption('--trigger <trigger>', 'Trigger')
  .requiredOption('--effects <effects>', 'Effects')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  copf scaffold sync --name CreateProfile --from User/create --to Profile/init  # Scaffold a sync between two concepts')
  .addHelpText('after', '  copf scaffold sync --name ValidateOrder --tier required  # Scaffold a required sync')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

syncScaffoldGenCommand
  .command('preview')
  .description('Dry-run: compute output files without writing. Uses Emitter content-addressing to show what would change.')
  .requiredOption('-n, --name <name>', 'PascalCase sync name')
  .requiredOption('--trigger <trigger>', 'Trigger')
  .requiredOption('--effects <effects>', 'Effects')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'preview', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

syncScaffoldGenCommand
  .command('register')
  .description('Return static metadata for PluginRegistry 
 name : SyncScaffoldGen 
 inputKind : SyncConfig 
 outputKind : SyncSpec 
 capabilities : [ sync-spec , when-clause , where-clause , then-clause ]')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const syncScaffoldGenCommandTree = {
  group: 'scaffold',
  description: 'Generate synchronization rule (.sync) file.',
  commands: [{ action: 'generate', command: 'sync' }, { action: 'preview', command: 'preview' }, { action: 'register', command: 'register' }],
};
