// Auto-generated by COPF Interface Kit — cli target
// Concept: SyncScaffoldGen
// Do not edit manually; regenerate with: copf interface generate

import { Command } from 'commander';

export const syncScaffoldGenCommand = new Command('sync-scaffold-gen')
  .description('Generate synchronization rule (.sync) file.');

syncScaffoldGenCommand
  .command('register')
  .description('Self-register with PluginRegistry so the scaffolding kit\'s KindSystem can track SyncConfig → SyncSpec transformations.')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

syncScaffoldGenCommand
  .command('sync')
  .description('Scaffold a .sync file with when/where/then clauses.')
  .requiredOption('-n, --name <name>', 'PascalCase sync name')
  .option('--from <from>', 'Trigger source (Concept/action)')
  .option('--to <to>', 'Effect target (Concept/action)')
  .option('-t, --tier <tier>', 'Sync tier (required, recommended)')
  .option('--eager', 'Fire immediately (default: true)')
  .option('-o, --output <output>', 'Output directory (default: ./syncs)')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const syncScaffoldGenCommandTree = {
  group: 'sync-scaffold-gen',
  description: 'Generate synchronization rule (.sync) file.',
  commands: [{ action: 'register', command: 'register' }, { action: 'generate', command: 'sync' }],
};
