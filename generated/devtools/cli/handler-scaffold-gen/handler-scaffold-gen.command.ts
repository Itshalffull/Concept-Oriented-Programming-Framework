// Auto-generated by Clef Clef Bind â€” cli target
// Concept: HandlerScaffoldGen
// Do not edit manually; regenerate with: clef interface generate

import { Command } from 'commander';

export const handlerScaffoldGenCommand = new Command('scaffold')
  .description('Generate TypeScript concept handler (.handler.ts) and conformance test.');

handlerScaffoldGenCommand
  .command('handler')
  .description('Scaffold a .handler.ts handler with register(), typed actions, and a conformance test.')
  .requiredOption('--concept-name <conceptName>', 'Concept Name')
  .option('-a, --actions <actions>', 'Comma-separated action signatures (name:param1:Type1,name:param2:Type2)')
  .option('--json', 'Output as JSON')
  .addHelpText('after', '\nExamples:')
  .addHelpText('after', '  clef scaffold handler --concept User --actions create:name:String,update:name:String,delete:id:String  # Scaffold a handler')
  .addHelpText('after', '  clef scaffold handler --concept Bookmark --input-kind BookmarkInput --output-kind BookmarkResult  # Scaffold with kind metadata')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'generate', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

handlerScaffoldGenCommand
  .command('preview')
  .description('Dry-run: compute output files without writing. Uses Emitter content-addressing to show what would change.')
  .requiredOption('--concept-name <conceptName>', 'Concept Name')
  .requiredOption('--actions <actions>', 'Actions')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'preview', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

handlerScaffoldGenCommand
  .command('register')
  .description('Return static metadata for PluginRegistry 
 name : HandlerScaffoldGen 
 inputKind : HandlerConfig 
 outputKind : HandlerImpl 
 capabilities : [ impl-ts , conformance-test , storage-patterns ]')
  .option('--json', 'Output as JSON')
  .action(async (opts) => {
    const result = await globalThis.kernel.handleRequest({ method: 'register', ...opts });
    console.log(opts.json ? JSON.stringify(result) : result);
  });

export const handlerScaffoldGenCommandTree = {
  group: 'scaffold',
  description: 'Generate TypeScript concept handler (.handler.ts) and conformance test.',
  commands: [{ action: 'generate', command: 'handler' }, { action: 'preview', command: 'preview' }, { action: 'register', command: 'register' }],
};
