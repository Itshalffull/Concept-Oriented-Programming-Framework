<!-- Auto-generated by COPF Interface Kit â€” claude-skills target -->
<!-- Concept: StorageAdapterScaffoldGen -->
<!-- Do not edit manually; regenerate with: copf interface generate -->
# Storage Adapter Guide

How to implement ConceptStorage adapters for different backends.

## ConceptStorage Interface

```typescript
interface ConceptStorage {
  put(relation: string, key: string, value: Record<string, unknown>): Promise<void>;
  get(relation: string, key: string): Promise<Record<string, unknown> | null>;
  find(relation: string, criteria?: Record<string, unknown>): Promise<Record<string, unknown>[]>;
  del(relation: string, key: string): Promise<void>;
  delMany(relation: string, criteria: Record<string, unknown>): Promise<number>;
}
```

## Backend Comparison

| Backend | Best For | Persistence | Query Power |
|---------|----------|-------------|-------------|
| memory | Tests, prototypes | None | In-memory filter |
| sqlite | Single-node, embedded | File | SQL |
| postgresql | Production, multi-node | Server | Full SQL |
| redis | Caching, sessions | Optional | Key-value |
| dynamodb | Serverless, high-scale | Managed | Key + query |

## SQLite Example

```typescript
class SqliteStorage implements ConceptStorage {
  private db: Database;

  constructor(dbPath: string) {
    this.db = new Database(dbPath);
    this.db.exec(`
      CREATE TABLE IF NOT EXISTS concept_store (
        relation TEXT NOT NULL,
        key TEXT NOT NULL,
        value TEXT NOT NULL,
        PRIMARY KEY (relation, key)
      )
    `);
  }

  async put(relation, key, value) {
    this.db.prepare(
      'INSERT OR REPLACE INTO concept_store VALUES (?, ?, ?)'
    ).run(relation, key, JSON.stringify(value));
  }
  // ... other methods
}
```
