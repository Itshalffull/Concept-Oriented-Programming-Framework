// Auto-generated by COPF Interface Kit â€” typescript-sdk target
// Concept: Comment
// Do not edit manually; regenerate with: copf interface generate


export class CommentClient {
  constructor(private baseUrl: string, private headers: Record<string, string> = {}) {}

  async create(input: { comment: string; body: string; target: string; author: string }): Promise<{ comment: string }> {
    const res = await fetch(`${this.baseUrl}/api/comments`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', ...this.headers },
      body: JSON.stringify(input),
    });
    if (!res.ok) throw new Error(`create failed: ${res.status}`);
    return res.json();
  }

  async delete(comment: string): Promise<{ variant: 'ok'; comment: string } | { variant: 'notfound'; message: string }> {
    const res = await fetch(`${this.baseUrl}/api/comments/${comment}`, {
      method: 'DELETE',
      headers: this.headers,
    });
    if (!res.ok) throw new Error(`delete failed: ${res.status}`);
    return res.json();
  }

  async list(input: { target: string }): Promise<{ comments: string }> {
    const params = new URLSearchParams();
    if (input.target !== undefined) params.set('target', String(input.target));
    const res = await fetch(`${this.baseUrl}/api/comments?${params}`, {
      method: 'GET',
      headers: this.headers,
    });
    if (!res.ok) throw new Error(`list failed: ${res.status}`);
    return res.json();
  }
}
