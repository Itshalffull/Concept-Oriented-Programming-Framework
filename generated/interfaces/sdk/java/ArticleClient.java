// Auto-generated by COPF Interface Kit — java-sdk target
// Concept: Article
// Do not edit manually; regenerate with: copf interface generate
package com.copf.client;

import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.*;
import com.fasterxml.jackson.databind.ObjectMapper;

public class ArticleClient {

    private final String baseUrl;
    private final Map<String, String> headers;
    private final HttpClient client;
    private final ObjectMapper mapper;

    public ArticleClient(String baseUrl) {
        this(baseUrl, new HashMap<>());
    }

    public ArticleClient(String baseUrl, Map<String, String> headers) {
        this.baseUrl = baseUrl;
        this.headers = headers;
        this.client = HttpClient.newHttpClient();
        this.mapper = new ObjectMapper();
    }

    private String[] flatHeaders() {
        List<String> flat = new ArrayList<>();
        for (Map.Entry<String, String> entry : headers.entrySet()) {
            flat.add(entry.getKey());
            flat.add(entry.getValue());
        }
        return flat.toArray(new String[0]);
    }

    // --- Request/Response Types ---

    public static class CreateInput {
        private String article;
        private String title;
        private String description;
        private String body;
        private String author;

        public CreateInput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
        public String getTitle() { return this.title; }
        public void setTitle(String title) { this.title = title; }
        public String getDescription() { return this.description; }
        public void setDescription(String description) { this.description = description; }
        public String getBody() { return this.body; }
        public void setBody(String body) { this.body = body; }
        public String getAuthor() { return this.author; }
        public void setAuthor(String author) { this.author = author; }
    }

    public static class CreateOutput {
        private String article;

        public CreateOutput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class UpdateInput {
        private String article;
        private String title;
        private String description;
        private String body;

        public UpdateInput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
        public String getTitle() { return this.title; }
        public void setTitle(String title) { this.title = title; }
        public String getDescription() { return this.description; }
        public void setDescription(String description) { this.description = description; }
        public String getBody() { return this.body; }
        public void setBody(String body) { this.body = body; }
    }

    public static class UpdateOutput {
        private String article;

        public UpdateOutput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class DeleteInput {
        private String article;

        public DeleteInput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class DeleteOutput {
        private String article;

        public DeleteOutput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class GetInput {
        private String article;

        public GetInput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class GetOutput {
        private String article;
        private String slug;
        private String title;
        private String description;
        private String body;
        private String author;

        public GetOutput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
        public String getSlug() { return this.slug; }
        public void setSlug(String slug) { this.slug = slug; }
        public String getTitle() { return this.title; }
        public void setTitle(String title) { this.title = title; }
        public String getDescription() { return this.description; }
        public void setDescription(String description) { this.description = description; }
        public String getBody() { return this.body; }
        public void setBody(String body) { this.body = body; }
        public String getAuthor() { return this.author; }
        public void setAuthor(String author) { this.author = author; }
    }

    public static class ListInput {}

    public static class ListOutput {
        private String articles;

        public ListOutput() {}

        public String getArticles() { return this.articles; }
        public void setArticles(String articles) { this.articles = articles; }
    }

    // --- Client Methods ---

    /**
     * create — POST /api/articles
     */
    public CreateOutput create(CreateInput input) throws Exception {
        String url = this.baseUrl + "/api/articles";
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("POST", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("create failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), CreateOutput.class);
    }

    /**
     * update — PUT /api/articles/{id}
     */
    public UpdateOutput update(UpdateInput input) throws Exception {
        String url = this.baseUrl + "/api/articles/{id}".replace("{id}", "");
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("PUT", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("update failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), UpdateOutput.class);
    }

    /**
     * delete — DELETE /api/articles/{id}
     */
    public DeleteOutput delete(String id) throws Exception {
        String url = this.baseUrl + "/api/articles/{id}".replace("{id}", id);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("DELETE", HttpRequest.BodyPublishers.noBody())
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("delete failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), DeleteOutput.class);
    }

    /**
     * get — GET /api/articles/{id}
     */
    public GetOutput get(String id) throws Exception {
        String url = this.baseUrl + "/api/articles/{id}".replace("{id}", id);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("GET", HttpRequest.BodyPublishers.noBody())
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("get failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), GetOutput.class);
    }

    /**
     * list — GET /api/articles
     */
    public ListOutput list() throws Exception {
        String url = this.baseUrl + "/api/articles";
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("GET", HttpRequest.BodyPublishers.noBody())
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("list failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), ListOutput.class);
    }
}
