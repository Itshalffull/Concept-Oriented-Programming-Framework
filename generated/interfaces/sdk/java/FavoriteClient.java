// Auto-generated by COPF Interface Kit — java-sdk target
// Concept: Favorite
// Do not edit manually; regenerate with: copf interface generate
package com.copf.client;

import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.util.*;
import com.fasterxml.jackson.databind.ObjectMapper;

public class FavoriteClient {

    private final String baseUrl;
    private final Map<String, String> headers;
    private final HttpClient client;
    private final ObjectMapper mapper;

    public FavoriteClient(String baseUrl) {
        this(baseUrl, new HashMap<>());
    }

    public FavoriteClient(String baseUrl, Map<String, String> headers) {
        this.baseUrl = baseUrl;
        this.headers = headers;
        this.client = HttpClient.newHttpClient();
        this.mapper = new ObjectMapper();
    }

    private String[] flatHeaders() {
        List<String> flat = new ArrayList<>();
        for (Map.Entry<String, String> entry : headers.entrySet()) {
            flat.add(entry.getKey());
            flat.add(entry.getValue());
        }
        return flat.toArray(new String[0]);
    }

    // --- Request/Response Types ---

    public static class FavoriteInput {
        private String user;
        private String article;

        public FavoriteInput() {}

        public String getUser() { return this.user; }
        public void setUser(String user) { this.user = user; }
        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class FavoriteOutput {
        private String user;
        private String article;

        public FavoriteOutput() {}

        public String getUser() { return this.user; }
        public void setUser(String user) { this.user = user; }
        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class UnfavoriteInput {
        private String user;
        private String article;

        public UnfavoriteInput() {}

        public String getUser() { return this.user; }
        public void setUser(String user) { this.user = user; }
        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class UnfavoriteOutput {
        private String user;
        private String article;

        public UnfavoriteOutput() {}

        public String getUser() { return this.user; }
        public void setUser(String user) { this.user = user; }
        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class IsFavoritedInput {
        private String user;
        private String article;

        public IsFavoritedInput() {}

        public String getUser() { return this.user; }
        public void setUser(String user) { this.user = user; }
        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class IsFavoritedOutput {
        private Boolean favorited;

        public IsFavoritedOutput() {}

        public Boolean getFavorited() { return this.favorited; }
        public void setFavorited(Boolean favorited) { this.favorited = favorited; }
    }

    public static class CountInput {
        private String article;

        public CountInput() {}

        public String getArticle() { return this.article; }
        public void setArticle(String article) { this.article = article; }
    }

    public static class CountOutput {
        private Long count;

        public CountOutput() {}

        public Long getCount() { return this.count; }
        public void setCount(Long count) { this.count = count; }
    }

    // --- Client Methods ---

    /**
     * favorite — POST /api/favorites/{id}/favorite
     */
    public FavoriteOutput favorite(FavoriteInput input) throws Exception {
        String url = this.baseUrl + "/api/favorites/{id}/favorite".replace("{id}", "");
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("POST", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("favorite failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), FavoriteOutput.class);
    }

    /**
     * unfavorite — POST /api/favorites/{id}/unfavorite
     */
    public UnfavoriteOutput unfavorite(UnfavoriteInput input) throws Exception {
        String url = this.baseUrl + "/api/favorites/{id}/unfavorite".replace("{id}", "");
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("POST", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("unfavorite failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), UnfavoriteOutput.class);
    }

    /**
     * isFavorited — POST /api/favorites/{id}/is-favorited
     */
    public IsFavoritedOutput isFavorited(IsFavoritedInput input) throws Exception {
        String url = this.baseUrl + "/api/favorites/{id}/is-favorited".replace("{id}", "");
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("POST", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("isFavorited failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), IsFavoritedOutput.class);
    }

    /**
     * count — POST /api/favorites/{id}/count
     */
    public CountOutput count(CountInput input) throws Exception {
        String url = this.baseUrl + "/api/favorites/{id}/count".replace("{id}", "");
        String body = mapper.writeValueAsString(input);
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .method("POST", HttpRequest.BodyPublishers.ofString(body))
            .header("Content-Type", "application/json")
            .headers(flatHeaders())
            .build();
        HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
        if (response.statusCode() >= 400) {
            throw new Exception("count failed with status " + response.statusCode() + ": " + response.body());
        }
        return mapper.readValue(response.body(), CountOutput.class);
    }
}
